-- This script was generated by the ERD tool in pgAdmin 4.
-- Please log an issue at https://github.com/pgadmin-org/pgadmin4/issues/new/choose if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public.accreditables
(
    accreditation_id uuid NOT NULL,
    accreditable_type character varying(255) COLLATE pg_catalog."default",
    accreditable_id bigint
);

CREATE TABLE IF NOT EXISTS public.accreditations
(
    id uuid NOT NULL,
    rejected_reason text COLLATE pg_catalog."default",
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    receiver_id uuid NOT NULL,
    author_id uuid NOT NULL,
    validator_id uuid,
    rejector_id uuid,
    authored_at timestamp(0) without time zone NOT NULL,
    validated_at timestamp(0) without time zone,
    rejected_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT accreditations_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.actions
(
    id uuid NOT NULL,
    service_step_id uuid NOT NULL,
    permission_service_id uuid NOT NULL,
    "position" integer,
    duration integer,
    process_type character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'automatic'::character varying,
    author_id uuid NOT NULL,
    pre_status character varying(255) COLLATE pg_catalog."default",
    post_status character varying(255) COLLATE pg_catalog."default",
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    description text COLLATE pg_catalog."default",
    CONSTRAINT actions_pkey PRIMARY KEY (id),
    CONSTRAINT actions_service_step_id_position_unique UNIQUE (service_step_id, "position")
);

CREATE TABLE IF NOT EXISTS public.activity_log
(
    id uuid NOT NULL,
    log_name character varying(255) COLLATE pg_catalog."default",
    event character varying(255) COLLATE pg_catalog."default",
    description text COLLATE pg_catalog."default" NOT NULL,
    subject_id uuid,
    causer_id uuid,
    ip_address inet,
    causer_type character varying(255) COLLATE pg_catalog."default",
    subject_type character varying(255) COLLATE pg_catalog."default",
    log_action character varying(255) COLLATE pg_catalog."default",
    properties json,
    batch_uuid uuid,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT activity_log_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.alert_type_vehicle_alert
(
    alert_type_id uuid NOT NULL,
    vehicle_alert_id uuid NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone
);

CREATE TABLE IF NOT EXISTS public.alert_types
(
    id uuid NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    description text COLLATE pg_catalog."default",
    image json NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    code character varying(255) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT alert_types_pkey PRIMARY KEY (id),
    CONSTRAINT alert_types_code_unique UNIQUE (code),
    CONSTRAINT alert_types_name_unique UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS public.auction_sale_declarations
(
    id uuid NOT NULL,
    auctioneer_id uuid NOT NULL,
    institution_id uuid,
    report_path json,
    officials json,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    reference character varying(255) COLLATE pg_catalog."default",
    qr_code_path character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT auction_sale_declarations_pkey PRIMARY KEY (id),
    CONSTRAINT auction_sale_declarations_reference_unique UNIQUE (reference)
);

CREATE TABLE IF NOT EXISTS public.auction_sale_vehicles
(
    id uuid NOT NULL,
    auction_sale_declaration_id uuid NOT NULL,
    vehicle_id uuid NOT NULL,
    price bigint NOT NULL,
    buyer_npi character varying(255) COLLATE pg_catalog."default",
    buyer_ifu character varying(255) COLLATE pg_catalog."default",
    buyer_identity_id uuid,
    buyer_institution_id uuid,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    reform_declaration_id uuid,
    custom_receipt_reference character varying(255) COLLATE pg_catalog."default",
    pickup_order_path json,
    divesting_file_path json,
    CONSTRAINT auction_sale_vehicles_pkey PRIMARY KEY (id)
);

COMMENT ON COLUMN public.auction_sale_vehicles.buyer_npi
    IS 'NPI de l''acheteur';

COMMENT ON COLUMN public.auction_sale_vehicles.buyer_ifu
    IS 'IFU de l''acheteur';

COMMENT ON COLUMN public.auction_sale_vehicles.buyer_identity_id
    IS 'Identit√© de l''acheteur';

COMMENT ON COLUMN public.auction_sale_vehicles.buyer_institution_id
    IS 'Entreprise de l''acheteur';

CREATE TABLE IF NOT EXISTS public.blacklist_persons
(
    id uuid NOT NULL,
    ifu character varying(255) COLLATE pg_catalog."default",
    npi character varying(255) COLLATE pg_catalog."default",
    plate_number character varying(255) COLLATE pg_catalog."default",
    vin character varying(255) COLLATE pg_catalog."default",
    id_number character varying(255) COLLATE pg_catalog."default",
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT blacklist_persons_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.blacklist_vehicles
(
    id uuid NOT NULL,
    vehicle_id uuid,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    vin character varying(255) COLLATE pg_catalog."default" NOT NULL,
    author_id uuid NOT NULL,
    validator_id uuid,
    validated_at timestamp(0) without time zone,
    rejector_id uuid,
    rejected_at timestamp(0) without time zone,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'submitted'::character varying,
    CONSTRAINT blacklist_vehicles_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.borders
(
    id uuid NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    longitude double precision,
    latitude double precision,
    border_country_id integer NOT NULL,
    town_id uuid,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT borders_pkey PRIMARY KEY (id),
    CONSTRAINT borders_name_unique UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS public.cart_demand
(
    cart_id uuid NOT NULL,
    demand_id uuid NOT NULL,
    amount double precision NOT NULL DEFAULT '0'::double precision
);

CREATE TABLE IF NOT EXISTS public.carts
(
    id uuid NOT NULL,
    profile_id uuid,
    institution_id uuid,
    amount double precision NOT NULL DEFAULT '0'::double precision,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'submitted'::character varying,
    CONSTRAINT carts_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.center_service
(
    center_id uuid NOT NULL,
    service_id uuid NOT NULL
);

CREATE TABLE IF NOT EXISTS public.center_zone
(
    center_id uuid NOT NULL,
    zone_id uuid NOT NULL
);

CREATE TABLE IF NOT EXISTS public.certificates
(
    id uuid NOT NULL,
    template_name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    model_type character varying(255) COLLATE pg_catalog."default" NOT NULL,
    model_id uuid NOT NULL,
    profile_id uuid,
    institution_id uuid,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    title character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT certificates_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.countries
(
    id serial NOT NULL,
    name character varying(100) COLLATE pg_catalog."default" NOT NULL,
    iso3 character(3) COLLATE pg_catalog."default" DEFAULT NULL::bpchar,
    numeric_code character(3) COLLATE pg_catalog."default" DEFAULT NULL::bpchar,
    iso2 character(2) COLLATE pg_catalog."default" DEFAULT NULL::bpchar,
    phonecode character varying COLLATE pg_catalog."default",
    capital character varying COLLATE pg_catalog."default",
    currency character varying COLLATE pg_catalog."default",
    currency_name character varying COLLATE pg_catalog."default",
    currency_symbol character varying COLLATE pg_catalog."default",
    tld character varying COLLATE pg_catalog."default",
    native character varying COLLATE pg_catalog."default",
    region character varying COLLATE pg_catalog."default",
    subregion character varying COLLATE pg_catalog."default",
    timezones character varying COLLATE pg_catalog."default",
    translations character varying COLLATE pg_catalog."default",
    latitude numeric(10, 8) DEFAULT NULL::numeric,
    longitude numeric(11, 8) DEFAULT NULL::numeric,
    emoji character varying(191) COLLATE pg_catalog."default" DEFAULT NULL::character varying,
    emojiu character varying(191) COLLATE pg_catalog."default" DEFAULT NULL::character varying,
    created_at timestamp without time zone,
    updated_at timestamp without time zone NOT NULL,
    flag smallint NOT NULL DEFAULT 1,
    wikidataid character varying COLLATE pg_catalog."default",
    CONSTRAINT countries_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.declarants
(
    id uuid NOT NULL,
    identity_id uuid NOT NULL,
    institution_id uuid NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT declarants_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.delivered_plates
(
    plate_order_id uuid NOT NULL,
    plate_id uuid NOT NULL
);

CREATE TABLE IF NOT EXISTS public.demand_actions
(
    id uuid NOT NULL,
    demand_id uuid NOT NULL,
    action_id uuid NOT NULL,
    profile_id uuid,
    assigned_at timestamp(0) without time zone,
    done_at timestamp(0) without time zone,
    duration bigint,
    status character varying(255) COLLATE pg_catalog."default" DEFAULT 'pending'::character varying,
    done_status character varying(255) COLLATE pg_catalog."default" DEFAULT 'pending'::character varying,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT demand_actions_pkey PRIMARY KEY (id)
);

COMMENT ON COLUMN public.demand_actions.duration
    IS 'duration the action taken in second';

CREATE TABLE IF NOT EXISTS public.demand_order
(
    demand_id uuid NOT NULL,
    order_id uuid NOT NULL,
    amount double precision NOT NULL,
    CONSTRAINT demand_order_pkey PRIMARY KEY (demand_id, order_id)
);

CREATE TABLE IF NOT EXISTS public.demand_otps
(
    id uuid NOT NULL,
    owner_npi character varying(255) COLLATE pg_catalog."default",
    buyer_npi character varying(255) COLLATE pg_catalog."default",
    owner_otp text COLLATE pg_catalog."default" NOT NULL,
    buyer_otp text COLLATE pg_catalog."default",
    is_verified boolean NOT NULL DEFAULT false,
    verified_at timestamp(0) without time zone,
    expire_at timestamp(0) without time zone NOT NULL,
    model_type character varying(255) COLLATE pg_catalog."default",
    model_id uuid,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    owner_ifu character varying(255) COLLATE pg_catalog."default",
    buyer_ifu character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT demand_otps_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.demand_service
(
    demand_id uuid NOT NULL,
    service_id uuid NOT NULL
);

CREATE TABLE IF NOT EXISTS public.demand_updates_histories
(
    id uuid NOT NULL,
    old_value character varying(255) COLLATE pg_catalog."default" NOT NULL,
    new_value character varying(255) COLLATE pg_catalog."default" NOT NULL,
    type character varying(255) COLLATE pg_catalog."default" NOT NULL,
    demand_id uuid NOT NULL,
    is_validated boolean NOT NULL DEFAULT false,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    model_type character varying(255) COLLATE pg_catalog."default",
    model_id uuid,
    CONSTRAINT demand_updates_histories_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.demands
(
    id uuid NOT NULL,
    reference character varying(255) COLLATE pg_catalog."default" NOT NULL,
    institution_id uuid,
    vehicle_owner_id uuid,
    vehicle_id uuid,
    active_treatment_id uuid,
    profile_id uuid,
    black_listed_at timestamp(0) without time zone,
    submitted_at timestamp(0) without time zone,
    black_list_verified_at timestamp(0) without time zone,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    service_id uuid NOT NULL,
    payment_status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    model_type character varying(255) COLLATE pg_catalog."default",
    model_id uuid,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    otp_verified boolean NOT NULL DEFAULT true,
    updates_status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'not_available'::character varying,
    CONSTRAINT demands_pkey PRIMARY KEY (id),
    CONSTRAINT demands_reference_unique UNIQUE (reference)
);

CREATE TABLE IF NOT EXISTS public.districts
(
    id uuid NOT NULL,
    code character varying(255) COLLATE pg_catalog."default" DEFAULT NULL::character varying,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    town_id uuid NOT NULL,
    created_at timestamp without time zone,
    updated_at timestamp without time zone,
    deleted_at timestamp without time zone,
    CONSTRAINT districts_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.document_types
(
    id uuid NOT NULL,
    code character varying(255) COLLATE pg_catalog."default" NOT NULL,
    description text COLLATE pg_catalog."default" NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT document_types_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.email_verifications
(
    id uuid NOT NULL,
    token character varying(255) COLLATE pg_catalog."default" NOT NULL,
    expire_at timestamp(0) without time zone NOT NULL,
    email character varying(255) COLLATE pg_catalog."default" NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT email_verifications_pkey PRIMARY KEY (id),
    CONSTRAINT email_verifications_email_unique UNIQUE (email)
);

CREATE TABLE IF NOT EXISTS public.extra_services
(
    service_id uuid NOT NULL,
    extra_service_id uuid NOT NULL,
    CONSTRAINT extra_services_service_id_extra_service_id_unique UNIQUE (service_id, extra_service_id)
);

CREATE TABLE IF NOT EXISTS public.failed_jobs
(
    id bigserial NOT NULL,
    uuid character varying(255) COLLATE pg_catalog."default" NOT NULL,
    connection text COLLATE pg_catalog."default" NOT NULL,
    queue text COLLATE pg_catalog."default" NOT NULL,
    payload text COLLATE pg_catalog."default" NOT NULL,
    exception text COLLATE pg_catalog."default" NOT NULL,
    failed_at timestamp(0) without time zone NOT NULL DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT failed_jobs_pkey PRIMARY KEY (id),
    CONSTRAINT failed_jobs_uuid_unique UNIQUE (uuid)
);

CREATE TABLE IF NOT EXISTS public.format_components
(
    id uuid NOT NULL,
    code character varying(255) COLLATE pg_catalog."default" NOT NULL,
    description text COLLATE pg_catalog."default",
    default_value character varying(255) COLLATE pg_catalog."default",
    default_length integer NOT NULL,
    possible_values json,
    is_auto boolean NOT NULL DEFAULT false,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT format_components_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.geographical_areas
(
    id uuid NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    description text COLLATE pg_catalog."default",
    type character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'city'::character varying,
    code character varying(255) COLLATE pg_catalog."default" NOT NULL,
    authorized_registration_format text COLLATE pg_catalog."default",
    validation_criteria text COLLATE pg_catalog."default",
    restrictions_or_special_requirements text COLLATE pg_catalog."default",
    staff_ids json NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT geographical_areas_pkey PRIMARY KEY (id),
    CONSTRAINT geographical_areas_code_unique UNIQUE (code),
    CONSTRAINT geographical_areas_name_unique UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS public.glass_engravings
(
    id uuid NOT NULL,
    "number" integer,
    vehicle_id uuid NOT NULL,
    vehicle_owner_id uuid NOT NULL,
    demand_id uuid NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL,
    expired boolean,
    issued_at timestamp(0) without time zone,
    expired_at timestamp(0) without time zone,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT glass_engravings_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.gma_vehicles
(
    id uuid NOT NULL,
    vehicle_id uuid,
    vin character varying(255) COLLATE pg_catalog."default" NOT NULL,
    customs_reference character varying(255) COLLATE pg_catalog."default",
    institution_id uuid,
    author_id uuid NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'recorded'::character varying,
    deleted_at timestamp(0) without time zone,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    validated_by uuid,
    validated_at timestamp(0) without time zone,
    rejected_by uuid,
    rejected_at timestamp(0) without time zone,
    rejected_reason text COLLATE pg_catalog."default",
    CONSTRAINT gma_vehicles_pkey PRIMARY KEY (id),
    CONSTRAINT gma_vehicles_vin_unique UNIQUE (vin)
);

CREATE TABLE IF NOT EXISTS public.gmd_vehicles
(
    id uuid NOT NULL,
    vin character varying(255) COLLATE pg_catalog."default" NOT NULL,
    customs_reference character varying(255) COLLATE pg_catalog."default",
    institution_id uuid,
    vehicle_id uuid,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'submitted'::character varying,
    author_id uuid NOT NULL,
    validated_by uuid,
    authored_at timestamp(0) without time zone NOT NULL,
    validated_at timestamp(0) without time zone,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    rejected_by uuid,
    rejected_at timestamp(0) without time zone,
    rejected_reason text COLLATE pg_catalog."default",
    CONSTRAINT gmd_vehicles_pkey PRIMARY KEY (id),
    CONSTRAINT gmd_vehicles_vin_unique UNIQUE (vin)
);

CREATE TABLE IF NOT EXISTS public.gov_vehicles
(
    id uuid NOT NULL,
    vehicle_id uuid,
    vin character varying(255) COLLATE pg_catalog."default" NOT NULL,
    customs_reference character varying(255) COLLATE pg_catalog."default",
    owner_npi character varying(255) COLLATE pg_catalog."default" NOT NULL,
    profile_id uuid,
    institution_id uuid,
    author_id uuid NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'no_reformed'::character varying,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT gov_vehicles_pkey PRIMARY KEY (id),
    CONSTRAINT gov_vehicles_customs_reference_unique UNIQUE (customs_reference),
    CONSTRAINT gov_vehicles_vin_unique UNIQUE (vin)
);

CREATE TABLE IF NOT EXISTS public.gray_card_duplicates
(
    id uuid NOT NULL,
    reference character varying(255) COLLATE pg_catalog."default",
    reason character varying(255) COLLATE pg_catalog."default" NOT NULL,
    old_gray_card_id uuid,
    new_gray_card_id uuid,
    demand_id uuid NOT NULL,
    issued_at timestamp(0) without time zone,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT gray_card_duplicates_pkey PRIMARY KEY (id),
    CONSTRAINT gray_card_duplicates_reference_unique UNIQUE (reference)
);

CREATE TABLE IF NOT EXISTS public.gray_cards
(
    id uuid NOT NULL,
    "number" character varying(255) COLLATE pg_catalog."default" NOT NULL,
    immatriculation_id uuid NOT NULL,
    vehicle_id uuid NOT NULL,
    vehicle_owner_id uuid NOT NULL,
    is_lost boolean NOT NULL DEFAULT false,
    is_spoiled boolean NOT NULL DEFAULT false,
    comment text COLLATE pg_catalog."default",
    is_active boolean NOT NULL DEFAULT true,
    deactivated_at timestamp(0) without time zone,
    deactivation_reason character varying(255) COLLATE pg_catalog."default",
    demand_id uuid,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    old_gray_card_id uuid,
    is_duplicate boolean NOT NULL DEFAULT false,
    print_order_id uuid,
    CONSTRAINT gray_cards_pkey PRIMARY KEY (id),
    CONSTRAINT gray_cards_number_unique UNIQUE ("number")
);

CREATE TABLE IF NOT EXISTS public.history_passwords
(
    id uuid NOT NULL,
    user_id uuid NOT NULL,
    password character varying(255) COLLATE pg_catalog."default" NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT history_passwords_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.identities
(
    id uuid NOT NULL,
    firstname character varying(255) COLLATE pg_catalog."default" NOT NULL,
    lastname character varying(255) COLLATE pg_catalog."default" NOT NULL,
    email character varying(255) COLLATE pg_catalog."default",
    telephone character varying(255) COLLATE pg_catalog."default" NOT NULL,
    telephone_fix character varying(255) COLLATE pg_catalog."default",
    telephone_professional character varying(255) COLLATE pg_catalog."default",
    photo character varying(255) COLLATE pg_catalog."default",
    profession_id character varying(255) COLLATE pg_catalog."default",
    address character varying(255) COLLATE pg_catalog."default",
    civility character varying(255) COLLATE pg_catalog."default",
    npi character varying(255) COLLATE pg_catalog."default",
    ifu character varying(255) COLLATE pg_catalog."default",
    city character varying(255) COLLATE pg_catalog."default",
    district character varying(255) COLLATE pg_catalog."default",
    birthdate date,
    birth_place character varying(255) COLLATE pg_catalog."default",
    gender character varying(255) COLLATE pg_catalog."default",
    country_id integer,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    state_id uuid,
    town_id uuid,
    district_id uuid,
    village_id uuid,
    house character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT identities_pkey PRIMARY KEY (id),
    CONSTRAINT identities_email_unique UNIQUE (email),
    CONSTRAINT identities_ifu_unique UNIQUE (ifu),
    CONSTRAINT identities_npi_unique UNIQUE (npi),
    CONSTRAINT identities_telephone_fix_unique UNIQUE (telephone_fix),
    CONSTRAINT identities_telephone_professional_unique UNIQUE (telephone_professional),
    CONSTRAINT identities_telephone_unique UNIQUE (telephone)
);

CREATE TABLE IF NOT EXISTS public.immatriculation_components
(
    format_component_id uuid NOT NULL,
    immatriculation_format_id uuid NOT NULL,
    length integer,
    "position" integer NOT NULL,
    value character varying(255) COLLATE pg_catalog."default"
);

CREATE TABLE IF NOT EXISTS public.immatriculation_formats
(
    id uuid NOT NULL,
    format character varying(255) COLLATE pg_catalog."default" NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    vehicle_category_id uuid,
    profile_type_id uuid,
    CONSTRAINT immatriculation_formats_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.immatriculation_labels
(
    id uuid NOT NULL,
    demand_id uuid,
    immatriculation_id uuid NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    plate_color_id uuid,
    front_plate_shape_id uuid,
    back_plate_shape_id uuid,
    label character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT immatriculation_labels_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.immatriculation_plates
(
    id uuid NOT NULL,
    plate_id uuid NOT NULL,
    immatriculation_id uuid NOT NULL,
    is_lost boolean NOT NULL DEFAULT false,
    is_spoiled boolean NOT NULL DEFAULT false,
    comment text COLLATE pg_catalog."default",
    is_active boolean NOT NULL DEFAULT true,
    deactivated_at timestamp(0) without time zone,
    deactivation_reason character varying(255) COLLATE pg_catalog."default",
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT immatriculation_plates_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.immatriculation_type_color
(
    immatriculation_type_id uuid NOT NULL,
    plate_color_id uuid NOT NULL
);

CREATE TABLE IF NOT EXISTS public.immatriculation_types
(
    id uuid NOT NULL,
    label character varying(255) COLLATE pg_catalog."default" NOT NULL,
    code character varying(255) COLLATE pg_catalog."default" NOT NULL,
    description text COLLATE pg_catalog."default",
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT immatriculation_types_pkey PRIMARY KEY (id),
    CONSTRAINT immatriculation_types_code_unique UNIQUE (code),
    CONSTRAINT immatriculation_types_label_unique UNIQUE (label)
);

CREATE TABLE IF NOT EXISTS public.immatriculations
(
    id uuid NOT NULL,
    demand_id uuid,
    "number" character varying(255) COLLATE pg_catalog."default",
    vehicle_id uuid NOT NULL,
    vehicle_owner_id uuid NOT NULL,
    issued_at timestamp(0) without time zone,
    immatriculation_format_id uuid,
    number_label character varying(255) COLLATE pg_catalog."default",
    plate_color_id uuid,
    front_plate_shape_id uuid,
    back_plate_shape_id uuid,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    desired_number character varying(255) COLLATE pg_catalog."default",
    label character varying(255) COLLATE pg_catalog."default",
    prefix character varying(255) COLLATE pg_catalog."default",
    alphabetic_label character varying(255) COLLATE pg_catalog."default",
    zone character varying(255) COLLATE pg_catalog."default",
    numeric_label integer,
    country_code character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT immatriculations_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.inactivity_reactivation_histories
(
    id uuid NOT NULL,
    user_id uuid NOT NULL,
    action character varying(255) COLLATE pg_catalog."default" DEFAULT 'activation'::character varying,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT inactivity_reactivation_histories_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.institution_types
(
    id uuid NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    description character varying(255) COLLATE pg_catalog."default" NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT institution_types_pkey PRIMARY KEY (id),
    CONSTRAINT institution_types_name_unique UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS public.institutions
(
    id uuid NOT NULL,
    acronym character varying(255) COLLATE pg_catalog."default",
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    ifu character varying(255) COLLATE pg_catalog."default",
    email character varying(255) COLLATE pg_catalog."default",
    telephone character varying(255) COLLATE pg_catalog."default",
    address character varying(255) COLLATE pg_catalog."default",
    type_id uuid NOT NULL,
    town_id uuid,
    district_id uuid,
    village_id uuid,
    deleted_at timestamp(0) without time zone,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    logo_path json,
    profile_type_code character varying(255) COLLATE pg_catalog."default",
    rccm character varying(255) COLLATE pg_catalog."default",
    social_reason character varying(255) COLLATE pg_catalog."default",
    border_id uuid,
    CONSTRAINT institutions_pkey PRIMARY KEY (id),
    CONSTRAINT institutions_email_unique UNIQUE (email),
    CONSTRAINT institutions_ifu_unique UNIQUE (ifu),
    CONSTRAINT institutions_name_unique UNIQUE (name),
    CONSTRAINT institutions_rccm_unique UNIQUE (rccm)
);

CREATE TABLE IF NOT EXISTS public.international_vehicle_registration_documents
(
    id uuid NOT NULL,
    vehicle_id uuid NOT NULL,
    user_id uuid NOT NULL,
    under_review boolean,
    approved boolean,
    paid boolean,
    ongoing_issuance boolean,
    issued boolean,
    expired boolean,
    reviewed_at timestamp(0) without time zone,
    approved_at timestamp(0) without time zone,
    paid_at timestamp(0) without time zone,
    issued_at timestamp(0) without time zone,
    expired_at timestamp(0) without time zone,
    validity_period_in_months integer NOT NULL DEFAULT 60,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT international_vehicle_registration_documents_pkey PRIMARY KEY (id),
    CONSTRAINT international_vehicle_registration_documents_vehicle_id_unique UNIQUE (vehicle_id)
);

CREATE TABLE IF NOT EXISTS public.invitations
(
    id uuid NOT NULL,
    npi character varying(255) COLLATE pg_catalog."default" NOT NULL,
    space_id uuid,
    profile_type_id uuid NOT NULL,
    accepted boolean NOT NULL DEFAULT false,
    denied boolean NOT NULL DEFAULT false,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    author_id uuid,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    email character varying(255) COLLATE pg_catalog."default",
    telephone character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT invitations_pkey PRIMARY KEY (id)
);

COMMENT ON COLUMN public.invitations.accepted
    IS 'If guest accept invitation or not';

COMMENT ON COLUMN public.invitations.denied
    IS 'If invitation is denied.';

CREATE TABLE IF NOT EXISTS public.invoices
(
    id uuid NOT NULL,
    reference character varying(255) COLLATE pg_catalog."default" NOT NULL,
    amount double precision NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    model_id uuid,
    paid_at timestamp(0) without time zone,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    institution_id uuid,
    profile_id uuid,
    model_type character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT invoices_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.jobs
(
    id bigserial NOT NULL,
    queue character varying(255) COLLATE pg_catalog."default" NOT NULL,
    payload text COLLATE pg_catalog."default" NOT NULL,
    attempts smallint NOT NULL,
    reserved_at integer,
    available_at integer NOT NULL,
    created_at integer NOT NULL,
    CONSTRAINT jobs_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.label_immatriculations
(
    id uuid NOT NULL,
    reference character varying(255) COLLATE pg_catalog."default" NOT NULL,
    label character varying(255) COLLATE pg_catalog."default" NOT NULL,
    immatriculation_id uuid NOT NULL,
    vehicle_id uuid NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    demand_id uuid NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT label_immatriculations_pkey PRIMARY KEY (id),
    CONSTRAINT label_immatriculations_reference_unique UNIQUE (reference)
);

CREATE TABLE IF NOT EXISTS public.last_immatriculations
(
    id uuid NOT NULL,
    prefix character varying(255) COLLATE pg_catalog."default",
    alphabetic_label character varying(255) COLLATE pg_catalog."default",
    zone character varying(255) COLLATE pg_catalog."default",
    numeric_label integer,
    country_code character varying(255) COLLATE pg_catalog."default",
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    vehicle_category_id uuid,
    CONSTRAINT last_immatriculations_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.legal_statuses
(
    id uuid NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    description character varying(255) COLLATE pg_catalog."default",
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT legal_statuses_pkey PRIMARY KEY (id),
    CONSTRAINT legal_statuses_name_unique UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS public.login_attempts
(
    id uuid NOT NULL,
    email character varying(255) COLLATE pg_catalog."default" NOT NULL,
    ip character varying(255) COLLATE pg_catalog."default" NOT NULL,
    attempts integer NOT NULL DEFAULT 0,
    last_attempt_at timestamp(0) without time zone,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT login_attempts_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.management_center_owner_type
(
    management_center_id uuid NOT NULL,
    owner_type_id uuid NOT NULL
);

CREATE TABLE IF NOT EXISTS public.management_center_park
(
    management_center_id uuid,
    park_id uuid
);

CREATE TABLE IF NOT EXISTS public.management_center_types
(
    id uuid NOT NULL,
    label character varying(255) COLLATE pg_catalog."default" NOT NULL,
    description text COLLATE pg_catalog."default" NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT management_center_types_pkey PRIMARY KEY (id),
    CONSTRAINT management_center_types_label_unique UNIQUE (label)
);

CREATE TABLE IF NOT EXISTS public.management_centers
(
    id uuid NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    manager_title character varying(255) COLLATE pg_catalog."default" NOT NULL,
    town_id uuid NOT NULL,
    state_id uuid NOT NULL,
    district_id uuid,
    village_id uuid,
    staff_id uuid,
    management_center_type_id uuid NOT NULL,
    deleted_at timestamp(0) without time zone,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    responsible_id uuid,
    CONSTRAINT management_centers_pkey PRIMARY KEY (id),
    CONSTRAINT management_centers_name_unique UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS public.meta_data
(
    id uuid NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    label character varying(255) COLLATE pg_catalog."default" NOT NULL,
    data json NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT meta_data_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.migrations
(
    id serial NOT NULL,
    migration character varying(255) COLLATE pg_catalog."default" NOT NULL,
    batch integer NOT NULL,
    CONSTRAINT migrations_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.model_has_permissions
(
    permission_id bigint NOT NULL,
    model_type character varying(255) COLLATE pg_catalog."default" NOT NULL,
    model_id uuid NOT NULL,
    CONSTRAINT model_has_permissions_pkey PRIMARY KEY (permission_id, model_id, model_type)
);

CREATE TABLE IF NOT EXISTS public.model_has_roles
(
    role_id bigint NOT NULL,
    model_type character varying(255) COLLATE pg_catalog."default" NOT NULL,
    model_id uuid NOT NULL,
    CONSTRAINT model_has_roles_pkey PRIMARY KEY (role_id, model_id, model_type)
);

CREATE TABLE IF NOT EXISTS public.modules
(
    id uuid NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    description text COLLATE pg_catalog."default",
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT modules_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.motorcycles
(
    id uuid NOT NULL,
    customs_reference character varying(255) COLLATE pg_catalog."default" NOT NULL,
    vin character varying(255) COLLATE pg_catalog."default" NOT NULL,
    npi character varying(255) COLLATE pg_catalog."default",
    ifu character varying(255) COLLATE pg_catalog."default",
    vehicle_id uuid,
    institution_id uuid NOT NULL,
    author_id uuid NOT NULL,
    buyer_id uuid,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT motorcycles_pkey PRIMARY KEY (id),
    CONSTRAINT motorcycles_vin_unique UNIQUE (vin)
);

CREATE TABLE IF NOT EXISTS public.mutations
(
    id uuid NOT NULL,
    sale_declaration_reference character varying(255) COLLATE pg_catalog."default" NOT NULL,
    sale_declaration_id character varying(255) COLLATE pg_catalog."default" NOT NULL,
    demand_id character varying(255) COLLATE pg_catalog."default" NOT NULL,
    vehicle_owner_id character varying(255) COLLATE pg_catalog."default" NOT NULL,
    vehicle_id character varying(255) COLLATE pg_catalog."default" NOT NULL,
    new_owner_id character varying(255) COLLATE pg_catalog."default" NOT NULL,
    gray_card_id uuid NOT NULL,
    comment text COLLATE pg_catalog."default",
    deleted_at timestamp(0) without time zone,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT mutations_pkey PRIMARY KEY (id),
    CONSTRAINT mutations_sale_declaration_reference_unique UNIQUE (sale_declaration_reference)
);

CREATE TABLE IF NOT EXISTS public.notification_configs
(
    id uuid NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    title text COLLATE pg_catalog."default",
    message_sms text COLLATE pg_catalog."default",
    message_in_app text COLLATE pg_catalog."default",
    message_mail text COLLATE pg_catalog."default",
    total_repetition_count integer NOT NULL DEFAULT 1,
    frequency_in_days integer NOT NULL DEFAULT 7,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT notification_configs_pkey PRIMARY KEY (id),
    CONSTRAINT notification_configs_name_unique UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS public.notifications
(
    id uuid NOT NULL,
    type character varying(255) COLLATE pg_catalog."default" NOT NULL,
    data text COLLATE pg_catalog."default",
    read_at timestamp(0) without time zone,
    notifiable_id uuid NOT NULL,
    notifiable_type character varying(255) COLLATE pg_catalog."default" NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT notifications_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.number_templates
(
    id uuid NOT NULL,
    template character varying(255) COLLATE pg_catalog."default" NOT NULL,
    author_id uuid NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT number_templates_pkey PRIMARY KEY (id),
    CONSTRAINT number_templates_template_unique UNIQUE (template)
);

CREATE TABLE IF NOT EXISTS public.oauth_access_tokens
(
    id character varying(100) COLLATE pg_catalog."default" NOT NULL,
    user_id uuid,
    client_id uuid NOT NULL,
    name character varying(255) COLLATE pg_catalog."default",
    scopes text COLLATE pg_catalog."default",
    revoked boolean NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    expires_at timestamp(0) without time zone,
    CONSTRAINT oauth_access_tokens_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.oauth_auth_codes
(
    id character varying(100) COLLATE pg_catalog."default" NOT NULL,
    user_id bigint NOT NULL,
    client_id uuid NOT NULL,
    scopes text COLLATE pg_catalog."default",
    revoked boolean NOT NULL,
    expires_at timestamp(0) without time zone,
    CONSTRAINT oauth_auth_codes_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.oauth_clients
(
    id uuid NOT NULL,
    user_id bigint,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    secret character varying(100) COLLATE pg_catalog."default",
    provider character varying(255) COLLATE pg_catalog."default",
    redirect text COLLATE pg_catalog."default" NOT NULL,
    personal_access_client boolean NOT NULL,
    password_client boolean NOT NULL,
    revoked boolean NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT oauth_clients_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.oauth_personal_access_clients
(
    id bigserial NOT NULL,
    client_id uuid NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT oauth_personal_access_clients_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.oauth_refresh_tokens
(
    id character varying(100) COLLATE pg_catalog."default" NOT NULL,
    access_token_id character varying(100) COLLATE pg_catalog."default" NOT NULL,
    revoked boolean NOT NULL,
    expires_at timestamp(0) without time zone,
    CONSTRAINT oauth_refresh_tokens_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.opposition_treatments
(
    id uuid NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL,
    rejected_reason text COLLATE pg_catalog."default",
    opposition_id uuid NOT NULL,
    treated_by uuid NOT NULL,
    emitted_at timestamp(0) without time zone,
    remitted_at timestamp(0) without time zone,
    validated_at timestamp(0) without time zone,
    lifted_at timestamp(0) without time zone,
    rejected_at timestamp(0) without time zone,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    institution_id uuid,
    affected_to_clerk uuid,
    affected_to_judge uuid,
    affected_to_clerk_at timestamp(0) without time zone,
    affected_to_judge_at timestamp(0) without time zone,
    CONSTRAINT opposition_treatments_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.opposition_vehicle
(
    opposition_id uuid NOT NULL,
    vehicle_id uuid NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone
);

CREATE TABLE IF NOT EXISTS public.oppositions
(
    id uuid NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    reference character varying(255) COLLATE pg_catalog."default" NOT NULL,
    reason_for_opposition uuid NOT NULL,
    owner_id uuid NOT NULL,
    author_id uuid NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    treatment_id uuid,
    institution_id uuid,
    is_active boolean NOT NULL DEFAULT false,
    CONSTRAINT oppositions_pkey PRIMARY KEY (id),
    CONSTRAINT oppositions_reference_unique UNIQUE (reference)
);

CREATE TABLE IF NOT EXISTS public.order_service
(
    service_id uuid NOT NULL,
    order_id uuid NOT NULL,
    deleted_at timestamp(0) without time zone
);

CREATE TABLE IF NOT EXISTS public.orders
(
    id uuid NOT NULL,
    reference character varying(255) COLLATE pg_catalog."default" NOT NULL,
    amount double precision NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    payment_status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    submitted_at timestamp(0) without time zone,
    paid_at timestamp(0) without time zone,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    institution_id uuid,
    profile_id uuid,
    CONSTRAINT orders_pkey PRIMARY KEY (id),
    CONSTRAINT orders_reference_unique UNIQUE (reference)
);

CREATE TABLE IF NOT EXISTS public.organization_staff
(
    organization_id uuid NOT NULL,
    staff_id uuid NOT NULL,
    position_id uuid,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone
);

CREATE TABLE IF NOT EXISTS public.organizations
(
    id uuid NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    description text COLLATE pg_catalog."default",
    parent_id uuid,
    is_interpol boolean NOT NULL DEFAULT false,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    responsible_id uuid,
    CONSTRAINT organizations_pkey PRIMARY KEY (id),
    CONSTRAINT organizations_name_unique UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS public.otp_codes
(
    id uuid NOT NULL,
    value character varying(255) COLLATE pg_catalog."default" NOT NULL,
    expired_at timestamp(0) without time zone NOT NULL,
    model_type character varying(255) COLLATE pg_catalog."default" NOT NULL,
    model_id uuid NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT otp_codes_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.owner_histories
(
    id uuid NOT NULL,
    vehicle_id uuid NOT NULL,
    vehicle_owner_id uuid NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    reason character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'mutated'::character varying,
    CONSTRAINT owner_histories_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.owner_types
(
    id uuid NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    label character varying(255) COLLATE pg_catalog."default" NOT NULL,
    price double precision,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT owner_types_pkey PRIMARY KEY (id),
    CONSTRAINT owner_types_name_unique UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS public.park_town
(
    park_id uuid,
    town_id uuid
);

CREATE TABLE IF NOT EXISTS public.park_vehicle_category
(
    park_id uuid,
    vehicle_category_id uuid
);

CREATE TABLE IF NOT EXISTS public.park_vehicle_type
(
    park_id uuid,
    vehicle_type_id uuid
);

CREATE TABLE IF NOT EXISTS public.parks
(
    id uuid NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    description text COLLATE pg_catalog."default",
    address character varying(255) COLLATE pg_catalog."default",
    longitude double precision,
    latitude double precision,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT parks_pkey PRIMARY KEY (id),
    CONSTRAINT parks_name_unique UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS public.password_reset_tokens
(
    id uuid,
    email character varying(255) COLLATE pg_catalog."default" NOT NULL,
    token character varying(255) COLLATE pg_catalog."default" NOT NULL,
    updated_at timestamp(0) without time zone,
    created_at timestamp(0) without time zone,
    CONSTRAINT password_reset_tokens_pkey PRIMARY KEY (email)
);

CREATE TABLE IF NOT EXISTS public.payment_providers
(
    id uuid NOT NULL,
    is_active boolean NOT NULL DEFAULT false,
    activated_at timestamp(0) without time zone,
    deactivated_at timestamp(0) without time zone,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    activator_id uuid,
    deactivator_id uuid,
    author_id uuid,
    name character varying(255) COLLATE pg_catalog."default",
    email character varying(255) COLLATE pg_catalog."default",
    code character varying(255) COLLATE pg_catalog."default" NOT NULL,
    description text COLLATE pg_catalog."default",
    telephone character varying(255) COLLATE pg_catalog."default",
    address character varying(255) COLLATE pg_catalog."default",
    is_default boolean NOT NULL DEFAULT false,
    CONSTRAINT payment_providers_pkey PRIMARY KEY (id),
    CONSTRAINT payment_providers_code_unique UNIQUE (code),
    CONSTRAINT payment_providers_name_unique UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS public.permission_services
(
    id uuid NOT NULL,
    service_id uuid NOT NULL,
    permission_id bigint NOT NULL,
    CONSTRAINT permission_services_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.permissions
(
    id bigserial NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    guard_name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    label character varying(255) COLLATE pg_catalog."default",
    module_id uuid,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT permissions_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.personal_access_tokens
(
    id bigserial NOT NULL,
    tokenable_type character varying(255) COLLATE pg_catalog."default" NOT NULL,
    tokenable_id character varying(36) COLLATE pg_catalog."default" NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    token character varying(64) COLLATE pg_catalog."default" NOT NULL,
    abilities text COLLATE pg_catalog."default",
    last_used_at timestamp(0) without time zone,
    expires_at timestamp(0) without time zone,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT personal_access_tokens_pkey PRIMARY KEY (id),
    CONSTRAINT personal_access_tokens_token_unique UNIQUE (token)
);

CREATE TABLE IF NOT EXISTS public.plate_color_profile_type
(
    plate_color_id uuid NOT NULL,
    profile_type_id uuid NOT NULL
);

CREATE TABLE IF NOT EXISTS public.plate_colors
(
    id uuid NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    label character varying(255) COLLATE pg_catalog."default" NOT NULL,
    color_code character varying(255) COLLATE pg_catalog."default",
    text_color character varying(255) COLLATE pg_catalog."default",
    cost integer NOT NULL DEFAULT 0,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT plate_colors_pkey PRIMARY KEY (id),
    CONSTRAINT plate_colors_name_unique UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS public.plate_duplicates
(
    id uuid NOT NULL,
    reference character varying(255) COLLATE pg_catalog."default",
    reason character varying(255) COLLATE pg_catalog."default" NOT NULL,
    old_plate_id uuid,
    new_plate_id uuid,
    demand_id uuid NOT NULL,
    issued_at timestamp(0) without time zone,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT plate_duplicates_pkey PRIMARY KEY (id),
    CONSTRAINT plate_duplicates_reference_unique UNIQUE (reference)
);

CREATE TABLE IF NOT EXISTS public.plate_orders
(
    id uuid NOT NULL,
    seller_id uuid,
    buyer_id uuid,
    quantity integer NOT NULL,
    plate_shape_id uuid,
    plate_color_id uuid,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    validated_at timestamp(0) without time zone,
    delivered_at timestamp(0) without time zone,
    rejected_at timestamp(0) without time zone,
    rejected_reason text COLLATE pg_catalog."default",
    validation_file character varying(255) COLLATE pg_catalog."default",
    payment_status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    amount integer,
    order_data json,
    reference character varying(255) COLLATE pg_catalog."default",
    paid_at timestamp(0) without time zone,
    validation_data json,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    author_profile_id uuid,
    validator_id uuid,
    rejector_id uuid,
    delivery_slip_file character varying(255) COLLATE pg_catalog."default",
    confirmator_id uuid,
    confirmed_at timestamp(0) without time zone,
    CONSTRAINT plate_orders_pkey PRIMARY KEY (id),
    CONSTRAINT plate_orders_reference_unique UNIQUE (reference)
);

COMMENT ON COLUMN public.plate_orders.seller_id
    IS 'fournisseur de plaque, null si anatt';

COMMENT ON COLUMN public.plate_orders.buyer_id
    IS 'acheteur de plaque, null si anatt';

CREATE TABLE IF NOT EXISTS public.plate_print_order
(
    plate_id uuid NOT NULL,
    print_order_id uuid NOT NULL,
    side character varying(255) COLLATE pg_catalog."default" NOT NULL
);

COMMENT ON COLUMN public.plate_print_order.side
    IS 'Plate side front or back.';

CREATE TABLE IF NOT EXISTS public.plate_shapes
(
    id uuid NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    description text COLLATE pg_catalog."default",
    cost integer NOT NULL,
    image character varying(255) COLLATE pg_catalog."default",
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    code character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT plate_shapes_pkey PRIMARY KEY (id),
    CONSTRAINT plate_shapes_name_unique UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS public.plate_transformations
(
    id uuid NOT NULL,
    demand_id uuid,
    "number" character varying(255) COLLATE pg_catalog."default",
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    vehicle_id uuid,
    plate_color_id uuid,
    front_plate_shape_id uuid,
    back_plate_shape_id uuid,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT plate_transformations_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.plates
(
    id uuid NOT NULL,
    serial_number character varying(255) COLLATE pg_catalog."default" NOT NULL,
    rfid character varying(255) COLLATE pg_catalog."default",
    plate_shape_id uuid NOT NULL,
    plate_color_id uuid NOT NULL,
    immatriculation_type character varying(255) COLLATE pg_catalog."default",
    immatriculation_id uuid,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    anatt_order_id uuid,
    institution_order_id uuid,
    institution_id uuid,
    is_valid boolean NOT NULL DEFAULT true,
    is_duplicate boolean NOT NULL DEFAULT false,
    CONSTRAINT plates_pkey PRIMARY KEY (id),
    CONSTRAINT plates_rfid_unique UNIQUE (rfid),
    CONSTRAINT plates_serial_number_unique UNIQUE (serial_number)
);

CREATE TABLE IF NOT EXISTS public.pledge_lift_treatments
(
    id uuid NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL,
    rejected_reasons text COLLATE pg_catalog."default",
    pledge_lift_id uuid,
    treated_by uuid,
    institution_treat_id uuid,
    treated_by_space character varying(255) COLLATE pg_catalog."default" NOT NULL,
    institution_remitted_id uuid,
    affected_to_clerk uuid,
    affected_to_clerk_at timestamp(0) without time zone,
    affected_to_anatt uuid,
    affected_to_anatt_at timestamp(0) without time zone,
    emitted_at timestamp(0) without time zone,
    remitted_at timestamp(0) without time zone,
    validated_at timestamp(0) without time zone,
    rejected_at timestamp(0) without time zone,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT pledge_lift_treatments_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.pledge_lifts
(
    id uuid NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL,
    author_id uuid NOT NULL,
    pledge_id uuid NOT NULL,
    institution_emitted_id uuid NOT NULL,
    is_active boolean NOT NULL DEFAULT false,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    pledge_lift_treatment_id uuid,
    can_update boolean NOT NULL DEFAULT false,
    CONSTRAINT pledge_lifts_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.pledge_treatments
(
    id uuid NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL,
    rejected_reasons text COLLATE pg_catalog."default",
    pledge_id uuid NOT NULL,
    treated_by uuid,
    institution_remitted_id uuid,
    institution_treat_id uuid,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    emitted_at timestamp(0) without time zone,
    remitted_at timestamp(0) without time zone,
    validated_at timestamp(0) without time zone,
    rejected_at timestamp(0) without time zone,
    affected_to_clerk_at timestamp(0) without time zone,
    affected_to_clerk uuid,
    treated_by_space character varying(255) COLLATE pg_catalog."default",
    affected_to_institution uuid,
    affected_to_institution_at timestamp(0) without time zone,
    affected_to_anatt uuid,
    affected_to_anatt_at timestamp(0) without time zone,
    CONSTRAINT pledge_treatments_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.pledges
(
    id uuid NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    vehicle_id uuid NOT NULL,
    vehicle_owner_id uuid NOT NULL,
    author_id uuid,
    institution_emitted_id uuid,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    pledge_treatment_id uuid,
    reference character varying(255) COLLATE pg_catalog."default",
    financial_institution uuid,
    is_active boolean NOT NULL DEFAULT false,
    can_update boolean NOT NULL DEFAULT false,
    CONSTRAINT pledges_pkey PRIMARY KEY (id),
    CONSTRAINT pledges_reference_unique UNIQUE (reference)
);

CREATE TABLE IF NOT EXISTS public.police_officer_assignments
(
    id uuid NOT NULL,
    profile_id uuid,
    border_id uuid NOT NULL,
    author_id uuid NOT NULL,
    validator_id uuid,
    rejector_id uuid,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    reject_reason text COLLATE pg_catalog."default",
    authored_at timestamp(0) without time zone NOT NULL,
    validated_at timestamp(0) without time zone,
    rejected_at timestamp(0) without time zone,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT police_officer_assignments_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.police_officers
(
    id uuid NOT NULL,
    identity_id uuid,
    profile_id uuid,
    border_id uuid,
    deleted_at timestamp(0) without time zone,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT police_officers_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.positions
(
    id uuid NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    description text COLLATE pg_catalog."default",
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT positions_pkey PRIMARY KEY (id),
    CONSTRAINT positions_name_unique UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS public.prices
(
    id uuid NOT NULL,
    characteristic_id uuid NOT NULL,
    service_id uuid NOT NULL,
    owner_type_id uuid NOT NULL,
    vehicle_type_id uuid NOT NULL,
    vehicle_category_id uuid NOT NULL,
    price double precision NOT NULL,
    deleted_at timestamp(0) without time zone,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT prices_pkey PRIMARY KEY (id),
    CONSTRAINT prices_characteristic_id_service_id_owner_type_id_vehicle_type_ UNIQUE (characteristic_id, service_id, owner_type_id, vehicle_type_id, vehicle_category_id)
);

CREATE TABLE IF NOT EXISTS public.print_orders
(
    id uuid NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    institution_id uuid,
    author_id uuid,
    plate_affected_at timestamp(0) without time zone,
    plate_printed_at timestamp(0) without time zone,
    plate_observations text COLLATE pg_catalog."default",
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    reference character varying(255) COLLATE pg_catalog."default" NOT NULL,
    validated_at timestamp(0) without time zone,
    rejected_at timestamp(0) without time zone,
    demand_id uuid NOT NULL,
    plate_printer_id uuid,
    plate_validator_id uuid,
    plate_rejector_id uuid,
    type character varying(255) COLLATE pg_catalog."default" DEFAULT 'plate'::character varying,
    plate_status character varying(255) COLLATE pg_catalog."default",
    card_status character varying(255) COLLATE pg_catalog."default",
    plate_validated_at timestamp(0) without time zone,
    plate_rejected_at timestamp(0) without time zone,
    card_printer_id uuid,
    card_printed_at timestamp(0) without time zone,
    card_validator_id uuid,
    card_validated_at timestamp(0) without time zone,
    card_rejector_id uuid,
    card_rejected_at timestamp(0) without time zone,
    card_observations text COLLATE pg_catalog."default",
    CONSTRAINT print_orders_pkey PRIMARY KEY (id),
    CONSTRAINT print_orders_reference_unique UNIQUE (reference)
);

COMMENT ON COLUMN public.print_orders.validated_at
    IS 'Validation date by ANATT';

COMMENT ON COLUMN public.print_orders.type
    IS 'Type of print order either plate or gray card';

CREATE TABLE IF NOT EXISTS public.profile_types
(
    id uuid NOT NULL,
    code character varying(255) COLLATE pg_catalog."default" NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    role_id bigint,
    icon_path json,
    CONSTRAINT profile_types_pkey PRIMARY KEY (id),
    CONSTRAINT profile_types_code_unique UNIQUE (code)
);

CREATE TABLE IF NOT EXISTS public.profile_zone
(
    profile_id uuid NOT NULL,
    zone_id uuid NOT NULL
);

CREATE TABLE IF NOT EXISTS public.profiles
(
    id uuid NOT NULL,
    user_id uuid NOT NULL,
    type_id uuid NOT NULL,
    space_id uuid,
    institution_id uuid,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    identity_id uuid,
    "number" character varying(255) COLLATE pg_catalog."default",
    suspended boolean NOT NULL DEFAULT false,
    suspended_at timestamp(0) without time zone,
    CONSTRAINT profiles_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.provided_services
(
    id uuid NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    description text COLLATE pg_catalog."default",
    cost integer NOT NULL,
    duration character varying(255) COLLATE pg_catalog."default",
    required_documents text COLLATE pg_catalog."default",
    image character varying(255) COLLATE pg_catalog."default",
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT provided_services_pkey PRIMARY KEY (id),
    CONSTRAINT provided_services_name_unique UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS public.reform_declarations
(
    id uuid NOT NULL,
    reference character varying(255) COLLATE pg_catalog."default" NOT NULL,
    auction_sale_declaration_id uuid,
    declarant_id uuid,
    report_path json,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT reform_declarations_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.reimmatriculation_reasons
(
    id uuid NOT NULL,
    title character varying(255) COLLATE pg_catalog."default" NOT NULL,
    code character varying(255) COLLATE pg_catalog."default" NOT NULL,
    requires_reason boolean NOT NULL DEFAULT false,
    requires_title_deposit boolean NOT NULL DEFAULT false,
    requires_transfer_certificate boolean NOT NULL DEFAULT false,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    enable_plate_transformation boolean NOT NULL DEFAULT false,
    img_path character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT reimmatriculation_reasons_pkey PRIMARY KEY (id),
    CONSTRAINT reimmatriculation_reasons_code_unique UNIQUE (code)
);

CREATE TABLE IF NOT EXISTS public.reimmatriculations
(
    id uuid NOT NULL,
    demand_id uuid,
    reason_id uuid NOT NULL,
    "number" character varying(255) COLLATE pg_catalog."default",
    custom_reason text COLLATE pg_catalog."default",
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    vehicle_id uuid,
    with_immatriculation boolean NOT NULL DEFAULT false,
    vehicle_owner_id uuid,
    plate_color_id uuid,
    back_plate_shape_id uuid,
    front_plate_shape_id uuid,
    desired_number character varying(255) COLLATE pg_catalog."default",
    label character varying(255) COLLATE pg_catalog."default",
    immatriculation_id uuid,
    plate_transformation_id uuid,
    CONSTRAINT reimmatriculations_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.required_document_types
(
    id uuid NOT NULL,
    document_type_id uuid NOT NULL,
    relation_type character varying(255) COLLATE pg_catalog."default" NOT NULL,
    required boolean NOT NULL DEFAULT true,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT required_document_types_pkey PRIMARY KEY (id),
    CONSTRAINT required_document_types_relation_type_document_type_id_unique UNIQUE (relation_type, document_type_id)
);

CREATE TABLE IF NOT EXISTS public.reserved_plate_numbers
(
    id uuid NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    alphabetic_label character varying(255) COLLATE pg_catalog."default",
    numeric_label character varying(255) COLLATE pg_catalog."default",
    vehicle_id uuid,
    vehicle_owner_id uuid,
    min integer,
    max integer,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    validated_at timestamp(0) without time zone,
    rejected_at timestamp(0) without time zone,
    CONSTRAINT reserved_plate_numbers_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.role_has_permissions
(
    permission_id bigint NOT NULL,
    role_id bigint NOT NULL,
    CONSTRAINT role_has_permissions_pkey PRIMARY KEY (permission_id, role_id)
);

CREATE TABLE IF NOT EXISTS public.roles
(
    id bigserial NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    guard_name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    label character varying(255) COLLATE pg_catalog."default",
    editable boolean NOT NULL DEFAULT true,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT roles_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.sale_declarations
(
    id uuid NOT NULL,
    reference character varying(255) COLLATE pg_catalog."default",
    new_owner_id uuid,
    vehicle_owner_id uuid,
    vehicle_id uuid,
    new_owner_npi character varying(255) COLLATE pg_catalog."default",
    new_owner_ifu character varying(255) COLLATE pg_catalog."default",
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    demand_id uuid NOT NULL,
    issued_at timestamp(0) without time zone,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT sale_declarations_pkey PRIMARY KEY (id),
    CONSTRAINT sale_declarations_reference_unique UNIQUE (reference)
);

CREATE TABLE IF NOT EXISTS public.service_children
(
    service_id uuid NOT NULL,
    parent_service_id uuid NOT NULL
);

CREATE TABLE IF NOT EXISTS public.service_documents
(
    service_id uuid NOT NULL,
    document_type_id uuid NOT NULL,
    is_required boolean NOT NULL DEFAULT true
);

CREATE TABLE IF NOT EXISTS public.service_management_center
(
    service_id uuid NOT NULL,
    management_center_id uuid NOT NULL
);

CREATE TABLE IF NOT EXISTS public.service_price_variations
(
    service_id uuid NOT NULL,
    model_type character varying(255) COLLATE pg_catalog."default" NOT NULL,
    model_id uuid NOT NULL,
    price double precision DEFAULT '0'::double precision
);

CREATE TABLE IF NOT EXISTS public.service_steps
(
    id uuid NOT NULL,
    service_id uuid,
    step_id uuid,
    "position" integer,
    process_type character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'automatic'::character varying,
    duration integer,
    CONSTRAINT service_steps_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.service_types
(
    id uuid NOT NULL,
    code character varying(255) COLLATE pg_catalog."default" NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    description text COLLATE pg_catalog."default",
    cost double precision,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT service_types_pkey PRIMARY KEY (id),
    CONSTRAINT service_types_code_unique UNIQUE (code),
    CONSTRAINT service_types_name_unique UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS public.service_vehicle_categories
(
    service_id uuid NOT NULL,
    vehicle_category_id uuid NOT NULL
);

CREATE TABLE IF NOT EXISTS public.services
(
    id uuid NOT NULL,
    code character varying(255) COLLATE pg_catalog."default" NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    description text COLLATE pg_catalog."default",
    type_id uuid NOT NULL,
    duration integer,
    cost double precision,
    procedures text COLLATE pg_catalog."default",
    "extract" text COLLATE pg_catalog."default",
    who_can_apply text COLLATE pg_catalog."default",
    link character varying(255) COLLATE pg_catalog."default",
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    published boolean NOT NULL DEFAULT false,
    published_at timestamp(0) without time zone,
    published_by uuid,
    target_organization_id uuid,
    parent_service_id uuid,
    vehicle_category_id uuid,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    image character varying(255) COLLATE pg_catalog."default",
    color character varying(255) COLLATE pg_catalog."default",
    can_be_demanded boolean NOT NULL DEFAULT true,
    is_active boolean NOT NULL DEFAULT true,
    is_child boolean NOT NULL DEFAULT false,
    deactived_at timestamp(0) without time zone,
    deactived_by uuid,
    CONSTRAINT services_pkey PRIMARY KEY (id),
    CONSTRAINT services_code_unique UNIQUE (code),
    CONSTRAINT services_name_unique UNIQUE (name)
);

COMMENT ON COLUMN public.services.duration
    IS 'in days';

CREATE TABLE IF NOT EXISTS public.simveb_files
(
    id uuid NOT NULL,
    path json NOT NULL,
    model_type character varying(255) COLLATE pg_catalog."default" NOT NULL,
    model_id uuid NOT NULL,
    type character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'image'::character varying,
    file_type_id uuid,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT simveb_files_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.simveb_images
(
    id uuid NOT NULL,
    path json NOT NULL,
    model_type character varying(255) COLLATE pg_catalog."default" NOT NULL,
    model_id uuid NOT NULL,
    type character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'image'::character varying,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT simveb_images_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.space_registration_requests
(
    id uuid NOT NULL,
    profile_type_id uuid,
    institution_id uuid NOT NULL,
    first_member_npi character varying(10) COLLATE pg_catalog."default" NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    validated_at timestamp(0) without time zone,
    validator_id uuid,
    rejected_at timestamp(0) without time zone,
    rejector_id uuid,
    reject_reason text COLLATE pg_catalog."default",
    creator_id uuid,
    deleted_at timestamp(0) without time zone,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    template character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'default'::character varying,
    CONSTRAINT space_registration_requests_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.space_suspension_lifting_requests
(
    id uuid NOT NULL,
    reference character varying(255) COLLATE pg_catalog."default" NOT NULL,
    author_id uuid NOT NULL,
    space_id uuid NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    validator_id uuid,
    rejector_id uuid,
    validated_at timestamp(0) without time zone,
    rejected_at timestamp(0) without time zone,
    reject_reason text COLLATE pg_catalog."default",
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT space_suspension_lifting_requests_pkey PRIMARY KEY (id),
    CONSTRAINT space_suspension_lifting_requests_reference_unique UNIQUE (reference)
);

CREATE TABLE IF NOT EXISTS public.space_suspension_requests
(
    id uuid NOT NULL,
    reference character varying(255) COLLATE pg_catalog."default" NOT NULL,
    author_id uuid NOT NULL,
    space_id uuid NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    validator_id uuid,
    rejector_id uuid,
    validated_at timestamp(0) without time zone,
    rejected_at timestamp(0) without time zone,
    reject_reason text COLLATE pg_catalog."default",
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT space_suspension_requests_pkey PRIMARY KEY (id),
    CONSTRAINT space_suspension_requests_reference_unique UNIQUE (reference)
);

CREATE TABLE IF NOT EXISTS public.spaces
(
    id uuid NOT NULL,
    request_id uuid,
    profile_type_id uuid NOT NULL,
    institution_id uuid,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    template character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'default'::character varying,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'active'::character varying,
    CONSTRAINT spaces_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.staff
(
    id uuid NOT NULL,
    position_id uuid,
    identity_id uuid,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    center_id uuid,
    profile_id uuid,
    invitation_id uuid,
    CONSTRAINT staff_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.states
(
    id uuid NOT NULL,
    code character varying(255) COLLATE pg_catalog."default" DEFAULT NULL::character varying,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    created_at timestamp without time zone,
    updated_at timestamp without time zone,
    deleted_at timestamp without time zone,
    CONSTRAINT states_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.steps
(
    id uuid NOT NULL,
    label character varying(255) COLLATE pg_catalog."default" NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    on_portal boolean NOT NULL DEFAULT false,
    CONSTRAINT steps_pkey PRIMARY KEY (id),
    CONSTRAINT steps_label_unique UNIQUE (label)
);

CREATE TABLE IF NOT EXISTS public.telescope_entries
(
    sequence bigserial NOT NULL,
    uuid uuid NOT NULL,
    batch_id uuid NOT NULL,
    family_hash character varying(255) COLLATE pg_catalog."default",
    should_display_on_index boolean NOT NULL DEFAULT true,
    type character varying(20) COLLATE pg_catalog."default" NOT NULL,
    content text COLLATE pg_catalog."default" NOT NULL,
    created_at timestamp(0) without time zone,
    CONSTRAINT telescope_entries_pkey PRIMARY KEY (sequence),
    CONSTRAINT telescope_entries_uuid_unique UNIQUE (uuid)
);

CREATE TABLE IF NOT EXISTS public.telescope_entries_tags
(
    entry_uuid uuid NOT NULL,
    tag character varying(255) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT telescope_entries_tags_pkey PRIMARY KEY (entry_uuid, tag)
);

CREATE TABLE IF NOT EXISTS public.telescope_monitoring
(
    tag character varying(255) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT telescope_monitoring_pkey PRIMARY KEY (tag)
);

CREATE TABLE IF NOT EXISTS public.tinted_window_authorizations
(
    id uuid NOT NULL,
    "number" integer,
    vehicle_id uuid NOT NULL,
    vehicle_owner_id uuid NOT NULL,
    demand_id uuid NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL,
    expired boolean,
    issued_at timestamp(0) without time zone,
    expired_at timestamp(0) without time zone,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT tinted_window_authorizations_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.title_deposits
(
    id uuid NOT NULL,
    demand_id uuid NOT NULL,
    vehicle_owner_id uuid NOT NULL,
    vehicle_id uuid NOT NULL,
    title_reason_id uuid NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    reference character varying(255) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT title_deposits_pkey PRIMARY KEY (id),
    CONSTRAINT title_deposits_reference_unique UNIQUE (reference)
);

CREATE TABLE IF NOT EXISTS public.title_reason_types
(
    id uuid NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    description character varying(255) COLLATE pg_catalog."default" NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT title_reason_types_pkey PRIMARY KEY (id),
    CONSTRAINT title_reason_types_name_unique UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS public.title_reasons
(
    id uuid NOT NULL,
    label character varying(255) COLLATE pg_catalog."default" NOT NULL,
    description text COLLATE pg_catalog."default",
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    reason_type uuid,
    CONSTRAINT title_reasons_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.title_recoveries
(
    id uuid NOT NULL,
    demand_id uuid NOT NULL,
    vehicle_owner_id uuid NOT NULL,
    vehicle_id uuid NOT NULL,
    deposit_id uuid NOT NULL,
    comment text COLLATE pg_catalog."default",
    status character varying(255) COLLATE pg_catalog."default" NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    reference character varying(255) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT title_recoveries_pkey PRIMARY KEY (id),
    CONSTRAINT title_recoveries_reference_unique UNIQUE (reference)
);

CREATE TABLE IF NOT EXISTS public.town_zone
(
    town_id uuid NOT NULL,
    zone_id uuid NOT NULL
);

CREATE TABLE IF NOT EXISTS public.towns
(
    id uuid NOT NULL,
    code character varying(255) COLLATE pg_catalog."default" DEFAULT NULL::character varying,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    state_id uuid NOT NULL,
    created_at timestamp without time zone,
    updated_at timestamp without time zone,
    deleted_at timestamp without time zone,
    CONSTRAINT towns_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.transactions
(
    id uuid NOT NULL,
    reference character varying(255) COLLATE pg_catalog."default" NOT NULL,
    payment_reference character varying(255) COLLATE pg_catalog."default",
    amount double precision NOT NULL,
    fees double precision NOT NULL DEFAULT '0'::double precision,
    total_amount double precision NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    payment_provider_id uuid,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    model_type character varying(255) COLLATE pg_catalog."default" NOT NULL,
    model_id uuid NOT NULL,
    type character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT transactions_pkey PRIMARY KEY (id),
    CONSTRAINT transactions_payment_reference_unique UNIQUE (payment_reference),
    CONSTRAINT transactions_reference_unique UNIQUE (reference)
);

CREATE TABLE IF NOT EXISTS public.transformation_characteristics
(
    id uuid NOT NULL,
    transformation_id uuid NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    old_characteristic uuid,
    new_characteristic uuid,
    CONSTRAINT transformation_characteristics_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.transformation_type_vehicle_characteristic_category
(
    type_id uuid NOT NULL,
    category_id uuid NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone
);

CREATE TABLE IF NOT EXISTS public.transformation_types
(
    id uuid NOT NULL,
    label character varying(255) COLLATE pg_catalog."default" NOT NULL,
    description character varying(255) COLLATE pg_catalog."default" NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT transformation_types_pkey PRIMARY KEY (id),
    CONSTRAINT transformation_types_label_unique UNIQUE (label)
);

CREATE TABLE IF NOT EXISTS public.treatment_times
(
    id uuid NOT NULL,
    start_at timestamp(0) without time zone NOT NULL,
    end_at timestamp(0) without time zone,
    profile_id uuid NOT NULL,
    treatment_id uuid NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL,
    duration integer,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT treatment_times_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.treatments
(
    id uuid NOT NULL,
    demand_id uuid NOT NULL,
    rejected_reason text COLLATE pg_catalog."default",
    suspended_reason text COLLATE pg_catalog."default",
    closed_reason text COLLATE pg_catalog."default",
    verification_comment text COLLATE pg_catalog."default",
    assigned_to_staff_at timestamp(0) without time zone,
    verified_at timestamp(0) without time zone,
    validated_at timestamp(0) without time zone,
    rejected_at timestamp(0) without time zone,
    suspended_at timestamp(0) without time zone,
    closed_at timestamp(0) without time zone,
    responsible_id uuid,
    assigned_to_staff_by uuid,
    validated_by uuid,
    rejected_by uuid,
    suspended_by uuid,
    verified_by uuid,
    closed_by uuid,
    interpol_staff_id uuid,
    pre_validated_by uuid,
    affected_to_interpol_service_by uuid,
    assigned_to_interpol_staff_by uuid,
    interpol_pre_validated_by uuid,
    interpol_validated_by uuid,
    affected_to_interpol_at timestamp(0) without time zone,
    assigned_to_interpol_staff_at timestamp(0) without time zone,
    pre_validated_at timestamp(0) without time zone,
    interpol_validated_at timestamp(0) without time zone,
    interpol_pre_validated_at timestamp(0) without time zone,
    interpol_pre_rejected_at timestamp(0) without time zone,
    interpol_rejected_at timestamp(0) without time zone,
    interpol_comment text COLLATE pg_catalog."default",
    print_order_emitted_at timestamp(0) without time zone,
    print_order_emitted_by uuid,
    printed_by uuid,
    printed_at timestamp(0) without time zone,
    print_observations text COLLATE pg_catalog."default",
    printer_id uuid,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    assigned_to_institution_at timestamp(0) without time zone,
    submitted_at timestamp(0) without time zone,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    management_center_id uuid,
    assigned_to_center_by uuid,
    assigned_to_center_at timestamp(0) without time zone,
    organization_id uuid,
    assigned_to_organization_at timestamp(0) without time zone,
    assigned_to_organization_by uuid,
    interpol_service_id uuid,
    CONSTRAINT treatments_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.users
(
    id uuid NOT NULL,
    name character varying(255) COLLATE pg_catalog."default",
    email character varying(255) COLLATE pg_catalog."default" NOT NULL,
    username character varying(255) COLLATE pg_catalog."default" NOT NULL,
    identity_id uuid NOT NULL,
    email_verified_at timestamp(0) without time zone,
    disabled_at timestamp(0) without time zone,
    password character varying(255) COLLATE pg_catalog."default",
    remember_token character varying(100) COLLATE pg_catalog."default",
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    password_updated_at timestamp(0) without time zone,
    online_profile_id uuid,
    CONSTRAINT users_pkey PRIMARY KEY (id),
    CONSTRAINT users_email_unique UNIQUE (email),
    CONSTRAINT users_username_unique UNIQUE (username)
);

CREATE TABLE IF NOT EXISTS public.vehicle_administrative_statuses
(
    id uuid NOT NULL,
    situation_type character varying(255) COLLATE pg_catalog."default" NOT NULL,
    motif character varying(255) COLLATE pg_catalog."default",
    declaration_code character varying(255) COLLATE pg_catalog."default" NOT NULL,
    vehicle_id uuid NOT NULL,
    declarant_id uuid NOT NULL,
    vehicle_owner_id uuid NOT NULL,
    institution_id uuid,
    demand_id uuid NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    deleted_at timestamp(0) without time zone,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT vehicle_administrative_statuses_pkey PRIMARY KEY (id),
    CONSTRAINT vehicle_administrative_statuses_declaration_code_unique UNIQUE (declaration_code)
);

CREATE TABLE IF NOT EXISTS public.vehicle_alerts
(
    id uuid NOT NULL,
    vehicle_id uuid NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL,
    comment text COLLATE pg_catalog."default" NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    driver_firstname character varying(255) COLLATE pg_catalog."default" NOT NULL,
    driver_lastname character varying(255) COLLATE pg_catalog."default" NOT NULL,
    author_id uuid,
    cancelor_id uuid,
    authored_at timestamp(0) without time zone,
    canceled_at timestamp(0) without time zone,
    reference character varying(255) COLLATE pg_catalog."default",
    border_id uuid,
    CONSTRAINT vehicle_alerts_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.vehicle_brands
(
    id uuid NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    description text COLLATE pg_catalog."default",
    native_country character varying(255) COLLATE pg_catalog."default",
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT vehicle_brands_pkey PRIMARY KEY (id),
    CONSTRAINT vehicle_brands_name_unique UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS public.vehicle_categories
(
    id uuid NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    label character varying(255) COLLATE pg_catalog."default" NOT NULL,
    nb_plate integer NOT NULL,
    price double precision,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT vehicle_categories_pkey PRIMARY KEY (id),
    CONSTRAINT vehicle_categories_name_unique UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS public.vehicle_characteristic_categories
(
    id uuid NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    code character varying(255) COLLATE pg_catalog."default",
    label character varying(255) COLLATE pg_catalog."default" NOT NULL,
    type character varying(255) COLLATE pg_catalog."default" NOT NULL,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    field_name character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT vehicle_characteristic_categories_pkey PRIMARY KEY (id),
    CONSTRAINT vehicle_characteristic_categories_name_unique UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS public.vehicle_characteristics
(
    id uuid NOT NULL,
    category_id uuid NOT NULL,
    value character varying(255) COLLATE pg_catalog."default",
    min_value double precision,
    max_value double precision,
    price double precision,
    cost double precision DEFAULT '0'::double precision,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    code character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT vehicle_characteristics_pkey PRIMARY KEY (id),
    CONSTRAINT unicity_cats UNIQUE (category_id, value, min_value, max_value)
);

CREATE TABLE IF NOT EXISTS public.vehicle_energy_sources
(
    id uuid NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    description text COLLATE pg_catalog."default",
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT vehicle_energy_sources_pkey PRIMARY KEY (id),
    CONSTRAINT vehicle_energy_sources_name_unique UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS public.vehicle_has_characteristics
(
    vehicle_id uuid NOT NULL,
    vehicle_characteristic_id uuid NOT NULL
);

CREATE TABLE IF NOT EXISTS public.vehicle_owners
(
    id uuid NOT NULL,
    bfu character varying(255) COLLATE pg_catalog."default",
    identity_id uuid,
    institution_id uuid,
    profile_id uuid,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    legal_status character varying(255) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT vehicle_owners_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.vehicle_passages
(
    id uuid NOT NULL,
    officer_id uuid NOT NULL,
    vehicle_id uuid,
    foreign_vehicle_immatriculation_number character varying(255) COLLATE pg_catalog."default",
    immatriculation_country_id bigint,
    driver_firstname character varying(255) COLLATE pg_catalog."default",
    driver_lastname character varying(255) COLLATE pg_catalog."default",
    driver_telephone character varying(255) COLLATE pg_catalog."default",
    vehicle_owner_firstname character varying(255) COLLATE pg_catalog."default",
    vehicle_owner_lastname character varying(255) COLLATE pg_catalog."default",
    vehicle_provenance character varying(255) COLLATE pg_catalog."default" NOT NULL,
    total_passengers_on_board integer NOT NULL,
    passage_type character varying(255) COLLATE pg_catalog."default" NOT NULL,
    driving_license_number character varying(255) COLLATE pg_catalog."default",
    gray_card_number character varying(255) COLLATE pg_catalog."default",
    driving_license_photo json,
    gray_card_photo json,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    border_id uuid,
    CONSTRAINT vehicle_passages_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.vehicle_transformations
(
    id uuid NOT NULL,
    demand_id uuid NOT NULL,
    vehicle_id uuid NOT NULL,
    owner_id uuid NOT NULL,
    status character varying(255) COLLATE pg_catalog."default" NOT NULL DEFAULT 'pending'::character varying,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    grey_card boolean NOT NULL DEFAULT false,
    CONSTRAINT vehicle_transformations_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.vehicle_types
(
    id uuid NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    label character varying(255) COLLATE pg_catalog."default" NOT NULL,
    price double precision,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT vehicle_types_pkey PRIMARY KEY (id),
    CONSTRAINT vehicle_types_name_unique UNIQUE (name)
);

CREATE TABLE IF NOT EXISTS public.vehicles
(
    id uuid NOT NULL,
    origin_country_id integer,
    customs_reference character varying(255) COLLATE pg_catalog."default",
    vin character varying(255) COLLATE pg_catalog."default" NOT NULL,
    vehicle_brand_id uuid,
    vehicle_model character varying(255) COLLATE pg_catalog."default",
    number_of_seats integer NOT NULL,
    vehicle_type_id uuid,
    vehicle_category_id uuid,
    owner_type_id uuid,
    owner_id uuid,
    engin_number character varying(255) COLLATE pg_catalog."default",
    charged_weight double precision,
    empty_weight double precision,
    first_circulation_year integer,
    park_id uuid,
    is_transformed boolean NOT NULL DEFAULT false,
    front_plate_id uuid,
    back_plate_id uuid,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    transformed_vehicle_id uuid,
    CONSTRAINT vehicles_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.villages
(
    id uuid NOT NULL,
    code character varying(255) COLLATE pg_catalog."default" DEFAULT NULL::character varying,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    district_id uuid NOT NULL,
    created_at timestamp without time zone,
    updated_at timestamp without time zone,
    deleted_at timestamp without time zone,
    CONSTRAINT villages_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.wallets
(
    id uuid NOT NULL,
    model_type character varying(255) COLLATE pg_catalog."default" NOT NULL,
    model_id uuid NOT NULL,
    balance double precision NOT NULL DEFAULT '0'::double precision,
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    CONSTRAINT wallets_pkey PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS public.zones
(
    id uuid NOT NULL,
    code character varying(255) COLLATE pg_catalog."default" NOT NULL,
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    description text COLLATE pg_catalog."default",
    created_at timestamp(0) without time zone,
    updated_at timestamp(0) without time zone,
    deleted_at timestamp(0) without time zone,
    CONSTRAINT zones_pkey PRIMARY KEY (id),
    CONSTRAINT zones_code_unique UNIQUE (code),
    CONSTRAINT zones_name_unique UNIQUE (name)
);

ALTER TABLE IF EXISTS public.accreditables
    ADD CONSTRAINT accreditables_accreditation_id_foreign FOREIGN KEY (accreditation_id)
    REFERENCES public.accreditations (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.accreditations
    ADD CONSTRAINT accreditations_authored_by_foreign FOREIGN KEY (author_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.accreditations
    ADD CONSTRAINT accreditations_receiver_id_foreign FOREIGN KEY (receiver_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.accreditations
    ADD CONSTRAINT accreditations_rejected_by_foreign FOREIGN KEY (rejector_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.accreditations
    ADD CONSTRAINT accreditations_validated_by_foreign FOREIGN KEY (validator_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.actions
    ADD CONSTRAINT actions_author_id_foreign FOREIGN KEY (author_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.actions
    ADD CONSTRAINT actions_permission_service_id_foreign FOREIGN KEY (permission_service_id)
    REFERENCES public.permission_services (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.actions
    ADD CONSTRAINT actions_service_step_id_foreign FOREIGN KEY (service_step_id)
    REFERENCES public.service_steps (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.alert_type_vehicle_alert
    ADD CONSTRAINT alert_type_vehicle_alert_alert_type_id_foreign FOREIGN KEY (alert_type_id)
    REFERENCES public.alert_types (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.alert_type_vehicle_alert
    ADD CONSTRAINT alert_type_vehicle_alert_vehicle_alert_id_foreign FOREIGN KEY (vehicle_alert_id)
    REFERENCES public.vehicle_alerts (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.auction_sale_declarations
    ADD CONSTRAINT auction_sale_declarations_auctioneer_id_foreign FOREIGN KEY (auctioneer_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.auction_sale_declarations
    ADD CONSTRAINT auction_sale_declarations_institution_id_foreign FOREIGN KEY (institution_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.auction_sale_vehicles
    ADD CONSTRAINT auction_sale_vehicles_reform_declaration_id_foreign FOREIGN KEY (reform_declaration_id)
    REFERENCES public.reform_declarations (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.blacklist_vehicles
    ADD CONSTRAINT blacklist_vehicles_author_id_foreign FOREIGN KEY (author_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.blacklist_vehicles
    ADD CONSTRAINT blacklist_vehicles_rejector_id_foreign FOREIGN KEY (rejector_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.blacklist_vehicles
    ADD CONSTRAINT blacklist_vehicles_validator_id_foreign FOREIGN KEY (validator_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.blacklist_vehicles
    ADD CONSTRAINT blacklist_vehicles_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.borders
    ADD CONSTRAINT borders_town_id_foreign FOREIGN KEY (town_id)
    REFERENCES public.towns (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.cart_demand
    ADD CONSTRAINT cart_demand_cart_id_foreign FOREIGN KEY (cart_id)
    REFERENCES public.carts (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.cart_demand
    ADD CONSTRAINT cart_demand_demand_id_foreign FOREIGN KEY (demand_id)
    REFERENCES public.demands (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.carts
    ADD CONSTRAINT carts_institution_id_foreign FOREIGN KEY (institution_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.carts
    ADD CONSTRAINT carts_profile_id_foreign FOREIGN KEY (profile_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.center_service
    ADD CONSTRAINT center_service_center_id_foreign FOREIGN KEY (center_id)
    REFERENCES public.management_centers (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.center_service
    ADD CONSTRAINT center_service_service_id_foreign FOREIGN KEY (service_id)
    REFERENCES public.services (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.center_zone
    ADD CONSTRAINT center_zone_center_id_foreign FOREIGN KEY (center_id)
    REFERENCES public.management_centers (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.center_zone
    ADD CONSTRAINT center_zone_zone_id_foreign FOREIGN KEY (zone_id)
    REFERENCES public.zones (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.certificates
    ADD CONSTRAINT certificates_institution_id_foreign FOREIGN KEY (institution_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.certificates
    ADD CONSTRAINT certificates_profile_id_foreign FOREIGN KEY (profile_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.declarants
    ADD CONSTRAINT declarants_identity_id_foreign FOREIGN KEY (identity_id)
    REFERENCES public.identities (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.declarants
    ADD CONSTRAINT declarants_institution_id_foreign FOREIGN KEY (institution_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.delivered_plates
    ADD CONSTRAINT delivered_plates_plate_id_foreign FOREIGN KEY (plate_id)
    REFERENCES public.plates (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.delivered_plates
    ADD CONSTRAINT delivered_plates_plate_order_id_foreign FOREIGN KEY (plate_order_id)
    REFERENCES public.plate_orders (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.demand_actions
    ADD CONSTRAINT demand_actions_action_id_foreign FOREIGN KEY (action_id)
    REFERENCES public.actions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.demand_actions
    ADD CONSTRAINT demand_actions_demand_id_foreign FOREIGN KEY (demand_id)
    REFERENCES public.demands (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.demand_actions
    ADD CONSTRAINT demand_actions_profile_id_foreign FOREIGN KEY (profile_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.demand_order
    ADD CONSTRAINT demand_order_demand_id_foreign FOREIGN KEY (demand_id)
    REFERENCES public.demands (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.demand_order
    ADD CONSTRAINT demand_order_order_id_foreign FOREIGN KEY (order_id)
    REFERENCES public.orders (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.demand_service
    ADD CONSTRAINT demand_service_demand_id_foreign FOREIGN KEY (demand_id)
    REFERENCES public.demands (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.demand_service
    ADD CONSTRAINT demand_service_service_id_foreign FOREIGN KEY (service_id)
    REFERENCES public.services (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.demand_updates_histories
    ADD CONSTRAINT demand_updates_histories_demand_id_foreign FOREIGN KEY (demand_id)
    REFERENCES public.demands (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.demands
    ADD CONSTRAINT demands_institution_id_foreign FOREIGN KEY (institution_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.demands
    ADD CONSTRAINT demands_profile_id_foreign FOREIGN KEY (profile_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.demands
    ADD CONSTRAINT demands_service_id_foreign FOREIGN KEY (service_id)
    REFERENCES public.services (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.demands
    ADD CONSTRAINT demands_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.demands
    ADD CONSTRAINT demands_vehicle_owner_id_foreign FOREIGN KEY (vehicle_owner_id)
    REFERENCES public.vehicle_owners (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.districts
    ADD CONSTRAINT districts_town_id_foreign FOREIGN KEY (town_id)
    REFERENCES public.towns (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.extra_services
    ADD CONSTRAINT extra_services_extra_service_id_foreign FOREIGN KEY (extra_service_id)
    REFERENCES public.services (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.extra_services
    ADD CONSTRAINT extra_services_service_id_foreign FOREIGN KEY (service_id)
    REFERENCES public.services (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.glass_engravings
    ADD CONSTRAINT glass_engravings_demand_id_foreign FOREIGN KEY (demand_id)
    REFERENCES public.demands (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.glass_engravings
    ADD CONSTRAINT glass_engravings_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.glass_engravings
    ADD CONSTRAINT glass_engravings_vehicle_owner_id_foreign FOREIGN KEY (vehicle_owner_id)
    REFERENCES public.vehicle_owners (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.gma_vehicles
    ADD CONSTRAINT gma_vehicles_author_id_foreign FOREIGN KEY (author_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.gma_vehicles
    ADD CONSTRAINT gma_vehicles_institution_id_foreign FOREIGN KEY (institution_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.gma_vehicles
    ADD CONSTRAINT gma_vehicles_rejected_by_foreign FOREIGN KEY (rejected_by)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.gma_vehicles
    ADD CONSTRAINT gma_vehicles_validated_by_foreign FOREIGN KEY (validated_by)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.gma_vehicles
    ADD CONSTRAINT gma_vehicles_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.gmd_vehicles
    ADD CONSTRAINT gmd_vehicles_author_id_foreign FOREIGN KEY (author_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.gmd_vehicles
    ADD CONSTRAINT gmd_vehicles_institution_id_foreign FOREIGN KEY (institution_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.gmd_vehicles
    ADD CONSTRAINT gmd_vehicles_rejected_by_foreign FOREIGN KEY (rejected_by)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.gmd_vehicles
    ADD CONSTRAINT gmd_vehicles_validated_by_foreign FOREIGN KEY (validated_by)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.gmd_vehicles
    ADD CONSTRAINT gmd_vehicles_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.gov_vehicles
    ADD CONSTRAINT gov_vehicles_author_id_foreign FOREIGN KEY (author_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.gov_vehicles
    ADD CONSTRAINT gov_vehicles_institution_id_foreign FOREIGN KEY (institution_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.gov_vehicles
    ADD CONSTRAINT gov_vehicles_profile_id_foreign FOREIGN KEY (profile_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.gov_vehicles
    ADD CONSTRAINT gov_vehicles_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.gray_card_duplicates
    ADD CONSTRAINT gray_card_duplicates_demand_id_foreign FOREIGN KEY (demand_id)
    REFERENCES public.demands (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.gray_card_duplicates
    ADD CONSTRAINT gray_card_duplicates_new_gray_card_id_foreign FOREIGN KEY (new_gray_card_id)
    REFERENCES public.gray_cards (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.gray_card_duplicates
    ADD CONSTRAINT gray_card_duplicates_old_gray_card_id_foreign FOREIGN KEY (old_gray_card_id)
    REFERENCES public.gray_cards (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.gray_cards
    ADD CONSTRAINT gray_cards_demand_id_foreign FOREIGN KEY (demand_id)
    REFERENCES public.demands (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.gray_cards
    ADD CONSTRAINT gray_cards_immatriculation_id_foreign FOREIGN KEY (immatriculation_id)
    REFERENCES public.immatriculations (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.gray_cards
    ADD CONSTRAINT gray_cards_old_gray_card_id_foreign FOREIGN KEY (old_gray_card_id)
    REFERENCES public.gray_cards (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.gray_cards
    ADD CONSTRAINT gray_cards_print_order_id_foreign FOREIGN KEY (print_order_id)
    REFERENCES public.print_orders (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.gray_cards
    ADD CONSTRAINT gray_cards_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.gray_cards
    ADD CONSTRAINT gray_cards_vehicle_owner_id_foreign FOREIGN KEY (vehicle_owner_id)
    REFERENCES public.vehicle_owners (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.history_passwords
    ADD CONSTRAINT history_passwords_user_id_foreign FOREIGN KEY (user_id)
    REFERENCES public.users (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.identities
    ADD CONSTRAINT identities_district_id_foreign FOREIGN KEY (district_id)
    REFERENCES public.districts (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.identities
    ADD CONSTRAINT identities_state_id_foreign FOREIGN KEY (state_id)
    REFERENCES public.states (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.identities
    ADD CONSTRAINT identities_town_id_foreign FOREIGN KEY (town_id)
    REFERENCES public.towns (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.identities
    ADD CONSTRAINT identities_village_id_foreign FOREIGN KEY (village_id)
    REFERENCES public.villages (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.immatriculation_components
    ADD CONSTRAINT immatriculation_components_format_component_id_foreign FOREIGN KEY (format_component_id)
    REFERENCES public.format_components (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.immatriculation_components
    ADD CONSTRAINT immatriculation_components_immatriculation_format_id_foreign FOREIGN KEY (immatriculation_format_id)
    REFERENCES public.immatriculation_formats (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.immatriculation_formats
    ADD CONSTRAINT immatriculation_formats_profile_type_id_foreign FOREIGN KEY (profile_type_id)
    REFERENCES public.profile_types (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.immatriculation_formats
    ADD CONSTRAINT immatriculation_formats_vehicle_category_id_foreign FOREIGN KEY (vehicle_category_id)
    REFERENCES public.vehicle_categories (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.immatriculation_labels
    ADD CONSTRAINT immatriculation_labels_back_plate_shape_id_foreign FOREIGN KEY (back_plate_shape_id)
    REFERENCES public.plate_shapes (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.immatriculation_labels
    ADD CONSTRAINT immatriculation_labels_demand_id_foreign FOREIGN KEY (demand_id)
    REFERENCES public.demands (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.immatriculation_labels
    ADD CONSTRAINT immatriculation_labels_front_plate_shape_id_foreign FOREIGN KEY (front_plate_shape_id)
    REFERENCES public.plate_shapes (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.immatriculation_labels
    ADD CONSTRAINT immatriculation_labels_immatriculation_id_foreign FOREIGN KEY (immatriculation_id)
    REFERENCES public.immatriculations (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.immatriculation_labels
    ADD CONSTRAINT immatriculation_labels_plate_color_id_foreign FOREIGN KEY (plate_color_id)
    REFERENCES public.plate_colors (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.immatriculation_plates
    ADD CONSTRAINT immatriculation_plates_immatriculation_id_foreign FOREIGN KEY (immatriculation_id)
    REFERENCES public.immatriculations (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.immatriculation_plates
    ADD CONSTRAINT immatriculation_plates_plate_id_foreign FOREIGN KEY (plate_id)
    REFERENCES public.plates (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.immatriculation_type_color
    ADD CONSTRAINT immatriculation_type_color_immatriculation_type_id_foreign FOREIGN KEY (immatriculation_type_id)
    REFERENCES public.immatriculation_types (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.immatriculation_type_color
    ADD CONSTRAINT immatriculation_type_color_plate_color_id_foreign FOREIGN KEY (plate_color_id)
    REFERENCES public.plate_colors (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.immatriculations
    ADD CONSTRAINT immatriculations_back_plate_shape_id_foreign FOREIGN KEY (back_plate_shape_id)
    REFERENCES public.plate_shapes (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.immatriculations
    ADD CONSTRAINT immatriculations_demand_id_foreign FOREIGN KEY (demand_id)
    REFERENCES public.demands (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.immatriculations
    ADD CONSTRAINT immatriculations_front_plate_shape_id_foreign FOREIGN KEY (front_plate_shape_id)
    REFERENCES public.plate_shapes (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.immatriculations
    ADD CONSTRAINT immatriculations_immatriculation_format_foreign FOREIGN KEY (immatriculation_format_id)
    REFERENCES public.immatriculation_formats (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.immatriculations
    ADD CONSTRAINT immatriculations_plate_color_id_foreign FOREIGN KEY (plate_color_id)
    REFERENCES public.plate_colors (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.immatriculations
    ADD CONSTRAINT immatriculations_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.immatriculations
    ADD CONSTRAINT immatriculations_vehicle_owner_id_foreign FOREIGN KEY (vehicle_owner_id)
    REFERENCES public.vehicle_owners (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.inactivity_reactivation_histories
    ADD CONSTRAINT inactivity_reactivation_histories_user_id_foreign FOREIGN KEY (user_id)
    REFERENCES public.users (id) MATCH SIMPLE
    ON UPDATE CASCADE
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.institutions
    ADD CONSTRAINT institutions_district_id_foreign FOREIGN KEY (district_id)
    REFERENCES public.districts (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.institutions
    ADD CONSTRAINT institutions_town_id_foreign FOREIGN KEY (town_id)
    REFERENCES public.towns (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.institutions
    ADD CONSTRAINT institutions_type_id_foreign FOREIGN KEY (type_id)
    REFERENCES public.institution_types (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.institutions
    ADD CONSTRAINT institutions_village_id_foreign FOREIGN KEY (village_id)
    REFERENCES public.villages (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.international_vehicle_registration_documents
    ADD CONSTRAINT international_vehicle_registration_documents_user_id_foreign FOREIGN KEY (user_id)
    REFERENCES public.users (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.international_vehicle_registration_documents
    ADD CONSTRAINT international_vehicle_registration_documents_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;
CREATE INDEX IF NOT EXISTS international_vehicle_registration_documents_vehicle_id_unique
    ON public.international_vehicle_registration_documents(vehicle_id);


ALTER TABLE IF EXISTS public.invitations
    ADD CONSTRAINT invitations_author_id_foreign FOREIGN KEY (author_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.invitations
    ADD CONSTRAINT invitations_profile_type_id_foreign FOREIGN KEY (profile_type_id)
    REFERENCES public.profile_types (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.invitations
    ADD CONSTRAINT invitations_space_id_foreign FOREIGN KEY (space_id)
    REFERENCES public.spaces (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.invoices
    ADD CONSTRAINT invoices_institution_id_foreign FOREIGN KEY (institution_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.invoices
    ADD CONSTRAINT invoices_profile_id_foreign FOREIGN KEY (profile_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.label_immatriculations
    ADD CONSTRAINT label_immatriculations_demand_id_foreign FOREIGN KEY (demand_id)
    REFERENCES public.demands (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.label_immatriculations
    ADD CONSTRAINT label_immatriculations_immatriculation_id_foreign FOREIGN KEY (immatriculation_id)
    REFERENCES public.immatriculations (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.label_immatriculations
    ADD CONSTRAINT label_immatriculations_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.last_immatriculations
    ADD CONSTRAINT last_immatriculations_vehicle_category_id_foreign FOREIGN KEY (vehicle_category_id)
    REFERENCES public.vehicle_categories (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.management_center_owner_type
    ADD CONSTRAINT management_center_owner_type_management_center_id_foreign FOREIGN KEY (management_center_id)
    REFERENCES public.management_centers (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.management_center_owner_type
    ADD CONSTRAINT management_center_owner_type_owner_type_id_foreign FOREIGN KEY (owner_type_id)
    REFERENCES public.owner_types (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.management_center_park
    ADD CONSTRAINT management_center_park_management_center_id_foreign FOREIGN KEY (management_center_id)
    REFERENCES public.management_centers (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.management_center_park
    ADD CONSTRAINT management_center_park_park_id_foreign FOREIGN KEY (park_id)
    REFERENCES public.parks (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.management_centers
    ADD CONSTRAINT management_centers_district_id_foreign FOREIGN KEY (district_id)
    REFERENCES public.districts (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.management_centers
    ADD CONSTRAINT management_centers_management_center_type_id_foreign FOREIGN KEY (management_center_type_id)
    REFERENCES public.management_center_types (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.management_centers
    ADD CONSTRAINT management_centers_responsible_id_foreign FOREIGN KEY (responsible_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.management_centers
    ADD CONSTRAINT management_centers_staff_id_foreign FOREIGN KEY (staff_id)
    REFERENCES public.staff (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.management_centers
    ADD CONSTRAINT management_centers_state_id_foreign FOREIGN KEY (state_id)
    REFERENCES public.states (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.management_centers
    ADD CONSTRAINT management_centers_town_id_foreign FOREIGN KEY (town_id)
    REFERENCES public.towns (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.management_centers
    ADD CONSTRAINT management_centers_village_id_foreign FOREIGN KEY (village_id)
    REFERENCES public.villages (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.model_has_permissions
    ADD CONSTRAINT model_has_permissions_permission_id_foreign FOREIGN KEY (permission_id)
    REFERENCES public.permissions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.model_has_roles
    ADD CONSTRAINT model_has_roles_role_id_foreign FOREIGN KEY (role_id)
    REFERENCES public.roles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.motorcycles
    ADD CONSTRAINT motorcycles_author_id_foreign FOREIGN KEY (author_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.motorcycles
    ADD CONSTRAINT motorcycles_buyer_id_foreign FOREIGN KEY (buyer_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.motorcycles
    ADD CONSTRAINT motorcycles_institution_id_foreign FOREIGN KEY (institution_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.motorcycles
    ADD CONSTRAINT motorcycles_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.mutations
    ADD CONSTRAINT mutations_gray_card_id_foreign FOREIGN KEY (gray_card_id)
    REFERENCES public.gray_cards (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.number_templates
    ADD CONSTRAINT number_templates_author_id_foreign FOREIGN KEY (author_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.opposition_treatments
    ADD CONSTRAINT opposition_treatments_affected_to_clerk_foreign FOREIGN KEY (affected_to_clerk)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.opposition_treatments
    ADD CONSTRAINT opposition_treatments_affected_to_judge_foreign FOREIGN KEY (affected_to_judge)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.opposition_treatments
    ADD CONSTRAINT opposition_treatments_institution_id_foreign FOREIGN KEY (institution_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.opposition_treatments
    ADD CONSTRAINT opposition_treatments_opposition_id_foreign FOREIGN KEY (opposition_id)
    REFERENCES public.oppositions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.opposition_treatments
    ADD CONSTRAINT opposition_treatments_treated_by_foreign FOREIGN KEY (treated_by)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.opposition_vehicle
    ADD CONSTRAINT opposition_vehicle_opposition_id_foreign FOREIGN KEY (opposition_id)
    REFERENCES public.oppositions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.opposition_vehicle
    ADD CONSTRAINT opposition_vehicle_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.oppositions
    ADD CONSTRAINT oppositions_author_id_foreign FOREIGN KEY (author_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.oppositions
    ADD CONSTRAINT oppositions_institution_id_foreign FOREIGN KEY (institution_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.oppositions
    ADD CONSTRAINT oppositions_owner_id_foreign FOREIGN KEY (owner_id)
    REFERENCES public.vehicle_owners (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.oppositions
    ADD CONSTRAINT oppositions_reason_for_opposition_foreign FOREIGN KEY (reason_for_opposition)
    REFERENCES public.title_reasons (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.oppositions
    ADD CONSTRAINT oppositions_treatment_id_foreign FOREIGN KEY (treatment_id)
    REFERENCES public.opposition_treatments (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.order_service
    ADD CONSTRAINT order_service_order_id_foreign FOREIGN KEY (order_id)
    REFERENCES public.orders (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.order_service
    ADD CONSTRAINT order_service_service_id_foreign FOREIGN KEY (service_id)
    REFERENCES public.services (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.orders
    ADD CONSTRAINT orders_institution_id_foreign FOREIGN KEY (institution_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.orders
    ADD CONSTRAINT orders_profile_id_foreign FOREIGN KEY (profile_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.organization_staff
    ADD CONSTRAINT organization_staff_organization_id_foreign FOREIGN KEY (organization_id)
    REFERENCES public.organizations (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.organization_staff
    ADD CONSTRAINT organization_staff_position_id_foreign FOREIGN KEY (position_id)
    REFERENCES public.positions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.organization_staff
    ADD CONSTRAINT organization_staff_staff_id_foreign FOREIGN KEY (staff_id)
    REFERENCES public.staff (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.organizations
    ADD CONSTRAINT organizations_responsible_id_foreign FOREIGN KEY (responsible_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.owner_histories
    ADD CONSTRAINT owner_histories_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.owner_histories
    ADD CONSTRAINT owner_histories_vehicle_owner_id_foreign FOREIGN KEY (vehicle_owner_id)
    REFERENCES public.vehicle_owners (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.park_town
    ADD CONSTRAINT park_town_park_id_foreign FOREIGN KEY (park_id)
    REFERENCES public.parks (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.park_town
    ADD CONSTRAINT park_town_town_id_foreign FOREIGN KEY (town_id)
    REFERENCES public.towns (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.park_vehicle_category
    ADD CONSTRAINT park_vehicle_category_park_id_foreign FOREIGN KEY (park_id)
    REFERENCES public.parks (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.park_vehicle_category
    ADD CONSTRAINT park_vehicle_category_vehicle_category_id_foreign FOREIGN KEY (vehicle_category_id)
    REFERENCES public.vehicle_categories (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.park_vehicle_type
    ADD CONSTRAINT park_vehicle_type_park_id_foreign FOREIGN KEY (park_id)
    REFERENCES public.parks (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.park_vehicle_type
    ADD CONSTRAINT park_vehicle_type_vehicle_type_id_foreign FOREIGN KEY (vehicle_type_id)
    REFERENCES public.vehicle_types (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.payment_providers
    ADD CONSTRAINT payment_providers_activator_id_foreign FOREIGN KEY (activator_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.payment_providers
    ADD CONSTRAINT payment_providers_author_id_foreign FOREIGN KEY (author_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.payment_providers
    ADD CONSTRAINT payment_providers_deactivator_id_foreign FOREIGN KEY (deactivator_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.permission_services
    ADD CONSTRAINT permission_services_permission_id_foreign FOREIGN KEY (permission_id)
    REFERENCES public.permissions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.permission_services
    ADD CONSTRAINT permission_services_service_id_foreign FOREIGN KEY (service_id)
    REFERENCES public.services (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.plate_color_profile_type
    ADD CONSTRAINT plate_color_profile_type_plate_color_id_foreign FOREIGN KEY (plate_color_id)
    REFERENCES public.plate_colors (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.plate_color_profile_type
    ADD CONSTRAINT plate_color_profile_type_profile_type_id_foreign FOREIGN KEY (profile_type_id)
    REFERENCES public.profile_types (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.plate_duplicates
    ADD CONSTRAINT plate_duplicates_demand_id_foreign FOREIGN KEY (demand_id)
    REFERENCES public.demands (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.plate_duplicates
    ADD CONSTRAINT plate_duplicates_new_plate_id_foreign FOREIGN KEY (new_plate_id)
    REFERENCES public.plates (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.plate_duplicates
    ADD CONSTRAINT plate_duplicates_old_plate_id_foreign FOREIGN KEY (old_plate_id)
    REFERENCES public.plates (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.plate_orders
    ADD CONSTRAINT plate_orders_author_profile_id_foreign FOREIGN KEY (author_profile_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.plate_orders
    ADD CONSTRAINT plate_orders_buyer_id_foreign FOREIGN KEY (buyer_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.plate_orders
    ADD CONSTRAINT plate_orders_confirmator_id_foreign FOREIGN KEY (confirmator_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.plate_orders
    ADD CONSTRAINT plate_orders_plate_color_id_foreign FOREIGN KEY (plate_color_id)
    REFERENCES public.plate_colors (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.plate_orders
    ADD CONSTRAINT plate_orders_plate_shape_id_foreign FOREIGN KEY (plate_shape_id)
    REFERENCES public.plate_shapes (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.plate_orders
    ADD CONSTRAINT plate_orders_rejector_id_foreign FOREIGN KEY (rejector_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.plate_orders
    ADD CONSTRAINT plate_orders_seller_id_foreign FOREIGN KEY (seller_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.plate_orders
    ADD CONSTRAINT plate_orders_validator_id_foreign FOREIGN KEY (validator_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.plate_print_order
    ADD CONSTRAINT plate_print_order_plate_id_foreign FOREIGN KEY (plate_id)
    REFERENCES public.plates (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.plate_print_order
    ADD CONSTRAINT plate_print_order_print_order_id_foreign FOREIGN KEY (print_order_id)
    REFERENCES public.print_orders (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.plate_transformations
    ADD CONSTRAINT plate_transformations_back_plate_shape_id_foreign FOREIGN KEY (back_plate_shape_id)
    REFERENCES public.plate_shapes (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.plate_transformations
    ADD CONSTRAINT plate_transformations_demand_id_foreign FOREIGN KEY (demand_id)
    REFERENCES public.demands (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.plate_transformations
    ADD CONSTRAINT plate_transformations_front_plate_shape_id_foreign FOREIGN KEY (front_plate_shape_id)
    REFERENCES public.plate_shapes (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.plate_transformations
    ADD CONSTRAINT plate_transformations_plate_color_id_foreign FOREIGN KEY (plate_color_id)
    REFERENCES public.plate_colors (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.plate_transformations
    ADD CONSTRAINT plate_transformations_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.plates
    ADD CONSTRAINT plates_anatt_order_id_foreign FOREIGN KEY (anatt_order_id)
    REFERENCES public.plate_orders (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.plates
    ADD CONSTRAINT plates_institution_id_foreign FOREIGN KEY (institution_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.plates
    ADD CONSTRAINT plates_institution_order_id_foreign FOREIGN KEY (institution_order_id)
    REFERENCES public.plate_orders (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.plates
    ADD CONSTRAINT plates_plate_color_id_foreign FOREIGN KEY (plate_color_id)
    REFERENCES public.plate_colors (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.plates
    ADD CONSTRAINT plates_plate_shape_id_foreign FOREIGN KEY (plate_shape_id)
    REFERENCES public.plate_shapes (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pledge_lift_treatments
    ADD CONSTRAINT pledge_lift_treatments_affected_to_anatt_foreign FOREIGN KEY (affected_to_anatt)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pledge_lift_treatments
    ADD CONSTRAINT pledge_lift_treatments_affected_to_clerk_foreign FOREIGN KEY (affected_to_clerk)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pledge_lift_treatments
    ADD CONSTRAINT pledge_lift_treatments_institution_remitted_id_foreign FOREIGN KEY (institution_remitted_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pledge_lift_treatments
    ADD CONSTRAINT pledge_lift_treatments_institution_treat_id_foreign FOREIGN KEY (institution_treat_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pledge_lift_treatments
    ADD CONSTRAINT pledge_lift_treatments_pledge_lift_id_foreign FOREIGN KEY (pledge_lift_id)
    REFERENCES public.pledge_lifts (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pledge_lift_treatments
    ADD CONSTRAINT pledge_lift_treatments_treated_by_foreign FOREIGN KEY (treated_by)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pledge_lifts
    ADD CONSTRAINT pledge_lifts_author_id_foreign FOREIGN KEY (author_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pledge_lifts
    ADD CONSTRAINT pledge_lifts_institution_emitted_id_foreign FOREIGN KEY (institution_emitted_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pledge_lifts
    ADD CONSTRAINT pledge_lifts_pledge_id_foreign FOREIGN KEY (pledge_id)
    REFERENCES public.pledges (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pledge_lifts
    ADD CONSTRAINT pledge_lifts_pledge_lift_treatment_id_foreign FOREIGN KEY (pledge_lift_treatment_id)
    REFERENCES public.pledge_lift_treatments (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pledge_treatments
    ADD CONSTRAINT pledge_treatments_affected_to_anatt_foreign FOREIGN KEY (affected_to_anatt)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pledge_treatments
    ADD CONSTRAINT pledge_treatments_affected_to_clerk_foreign FOREIGN KEY (affected_to_clerk)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pledge_treatments
    ADD CONSTRAINT pledge_treatments_affected_to_institution_foreign FOREIGN KEY (affected_to_institution)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pledge_treatments
    ADD CONSTRAINT pledge_treatments_institution_submit_id_foreign FOREIGN KEY (institution_remitted_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pledge_treatments
    ADD CONSTRAINT pledge_treatments_institution_treat_id_foreign FOREIGN KEY (institution_treat_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pledge_treatments
    ADD CONSTRAINT pledge_treatments_pledge_id_foreign FOREIGN KEY (pledge_id)
    REFERENCES public.pledges (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pledge_treatments
    ADD CONSTRAINT pledge_treatments_validator_id_foreign FOREIGN KEY (treated_by)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pledges
    ADD CONSTRAINT pledges_author_id_foreign FOREIGN KEY (author_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pledges
    ADD CONSTRAINT pledges_financial_institution_foreign FOREIGN KEY (financial_institution)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pledges
    ADD CONSTRAINT pledges_institution_submit_id_foreign FOREIGN KEY (institution_emitted_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pledges
    ADD CONSTRAINT pledges_pledge_treatment_id_foreign FOREIGN KEY (pledge_treatment_id)
    REFERENCES public.pledge_treatments (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pledges
    ADD CONSTRAINT pledges_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.pledges
    ADD CONSTRAINT pledges_vehicle_owner_id_foreign FOREIGN KEY (vehicle_owner_id)
    REFERENCES public.vehicle_owners (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.police_officer_assignments
    ADD CONSTRAINT police_officer_assignments_author_id_foreign FOREIGN KEY (author_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.police_officer_assignments
    ADD CONSTRAINT police_officer_assignments_border_id_foreign FOREIGN KEY (border_id)
    REFERENCES public.borders (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.police_officer_assignments
    ADD CONSTRAINT police_officer_assignments_profile_id_foreign FOREIGN KEY (profile_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.police_officer_assignments
    ADD CONSTRAINT police_officer_assignments_rejector_id_foreign FOREIGN KEY (rejector_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.police_officer_assignments
    ADD CONSTRAINT police_officer_assignments_validator_id_foreign FOREIGN KEY (validator_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.police_officers
    ADD CONSTRAINT police_officers_border_id_foreign FOREIGN KEY (border_id)
    REFERENCES public.borders (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.police_officers
    ADD CONSTRAINT police_officers_identity_id_foreign FOREIGN KEY (identity_id)
    REFERENCES public.identities (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.police_officers
    ADD CONSTRAINT police_officers_profile_id_foreign FOREIGN KEY (profile_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.prices
    ADD CONSTRAINT prices_characteristic_id_foreign FOREIGN KEY (characteristic_id)
    REFERENCES public.vehicle_characteristics (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.prices
    ADD CONSTRAINT prices_owner_type_id_foreign FOREIGN KEY (owner_type_id)
    REFERENCES public.owner_types (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.prices
    ADD CONSTRAINT prices_service_id_foreign FOREIGN KEY (service_id)
    REFERENCES public.services (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.prices
    ADD CONSTRAINT prices_vehicle_category_id_foreign FOREIGN KEY (vehicle_category_id)
    REFERENCES public.vehicle_categories (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.prices
    ADD CONSTRAINT prices_vehicle_type_id_foreign FOREIGN KEY (vehicle_type_id)
    REFERENCES public.vehicle_types (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.print_orders
    ADD CONSTRAINT print_orders_author_id_foreign FOREIGN KEY (author_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.print_orders
    ADD CONSTRAINT print_orders_card_printer_id_foreign FOREIGN KEY (card_printer_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.print_orders
    ADD CONSTRAINT print_orders_card_rejector_id_foreign FOREIGN KEY (card_rejector_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.print_orders
    ADD CONSTRAINT print_orders_card_validator_id_foreign FOREIGN KEY (card_validator_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.print_orders
    ADD CONSTRAINT print_orders_demand_id_foreign FOREIGN KEY (demand_id)
    REFERENCES public.demands (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.print_orders
    ADD CONSTRAINT print_orders_institution_id_foreign FOREIGN KEY (institution_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.print_orders
    ADD CONSTRAINT print_orders_printer_id_foreign FOREIGN KEY (plate_printer_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.print_orders
    ADD CONSTRAINT print_orders_rejector_id_foreign FOREIGN KEY (plate_rejector_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.print_orders
    ADD CONSTRAINT print_orders_validator_id_foreign FOREIGN KEY (plate_validator_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.profile_types
    ADD CONSTRAINT profile_types_role_id_foreign FOREIGN KEY (role_id)
    REFERENCES public.roles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.profile_zone
    ADD CONSTRAINT profile_zone_profile_id_foreign FOREIGN KEY (profile_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.profile_zone
    ADD CONSTRAINT profile_zone_zone_id_foreign FOREIGN KEY (zone_id)
    REFERENCES public.zones (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.profiles
    ADD CONSTRAINT profiles_identity_id_foreign FOREIGN KEY (identity_id)
    REFERENCES public.identities (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.profiles
    ADD CONSTRAINT profiles_institution_id_foreign FOREIGN KEY (institution_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.profiles
    ADD CONSTRAINT profiles_type_id_foreign FOREIGN KEY (type_id)
    REFERENCES public.profile_types (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.profiles
    ADD CONSTRAINT profiles_user_id_foreign FOREIGN KEY (user_id)
    REFERENCES public.users (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.reform_declarations
    ADD CONSTRAINT reform_declarations_auction_sale_declaration_id_foreign FOREIGN KEY (auction_sale_declaration_id)
    REFERENCES public.auction_sale_declarations (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.reform_declarations
    ADD CONSTRAINT reform_declarations_declarant_id_foreign FOREIGN KEY (declarant_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.reimmatriculations
    ADD CONSTRAINT reimmatriculations_back_plate_shape_id_foreign FOREIGN KEY (back_plate_shape_id)
    REFERENCES public.plate_shapes (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.reimmatriculations
    ADD CONSTRAINT reimmatriculations_demand_id_foreign FOREIGN KEY (demand_id)
    REFERENCES public.demands (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.reimmatriculations
    ADD CONSTRAINT reimmatriculations_front_plate_shape_id_foreign FOREIGN KEY (front_plate_shape_id)
    REFERENCES public.plate_shapes (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.reimmatriculations
    ADD CONSTRAINT reimmatriculations_immatriculation_id_foreign FOREIGN KEY (immatriculation_id)
    REFERENCES public.immatriculations (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.reimmatriculations
    ADD CONSTRAINT reimmatriculations_plate_color_id_foreign FOREIGN KEY (plate_color_id)
    REFERENCES public.plate_colors (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.reimmatriculations
    ADD CONSTRAINT reimmatriculations_plate_transformation_id_foreign FOREIGN KEY (plate_transformation_id)
    REFERENCES public.plate_transformations (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.reimmatriculations
    ADD CONSTRAINT reimmatriculations_reason_id_foreign FOREIGN KEY (reason_id)
    REFERENCES public.reimmatriculation_reasons (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.reimmatriculations
    ADD CONSTRAINT reimmatriculations_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.reimmatriculations
    ADD CONSTRAINT reimmatriculations_vehicle_owner_id_foreign FOREIGN KEY (vehicle_owner_id)
    REFERENCES public.vehicle_owners (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.required_document_types
    ADD CONSTRAINT required_document_types_document_type_id_foreign FOREIGN KEY (document_type_id)
    REFERENCES public.document_types (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.reserved_plate_numbers
    ADD CONSTRAINT reserved_plate_numbers_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.reserved_plate_numbers
    ADD CONSTRAINT reserved_plate_numbers_vehicle_owner_id_foreign FOREIGN KEY (vehicle_owner_id)
    REFERENCES public.vehicle_owners (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.role_has_permissions
    ADD CONSTRAINT role_has_permissions_permission_id_foreign FOREIGN KEY (permission_id)
    REFERENCES public.permissions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.role_has_permissions
    ADD CONSTRAINT role_has_permissions_role_id_foreign FOREIGN KEY (role_id)
    REFERENCES public.roles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.sale_declarations
    ADD CONSTRAINT sale_declarations_demand_id_foreign FOREIGN KEY (demand_id)
    REFERENCES public.demands (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.sale_declarations
    ADD CONSTRAINT sale_declarations_new_owner_id_foreign FOREIGN KEY (new_owner_id)
    REFERENCES public.vehicle_owners (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.sale_declarations
    ADD CONSTRAINT sale_declarations_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.sale_declarations
    ADD CONSTRAINT sale_declarations_vehicle_owner_id_foreign FOREIGN KEY (vehicle_owner_id)
    REFERENCES public.vehicle_owners (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.service_children
    ADD CONSTRAINT service_children_parent_service_id_foreign FOREIGN KEY (parent_service_id)
    REFERENCES public.services (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.service_children
    ADD CONSTRAINT service_children_service_id_foreign FOREIGN KEY (service_id)
    REFERENCES public.services (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.service_documents
    ADD CONSTRAINT service_documents_document_type_id_foreign FOREIGN KEY (document_type_id)
    REFERENCES public.document_types (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.service_documents
    ADD CONSTRAINT service_documents_service_id_foreign FOREIGN KEY (service_id)
    REFERENCES public.services (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.service_management_center
    ADD CONSTRAINT service_management_center_management_center_id_foreign FOREIGN KEY (management_center_id)
    REFERENCES public.management_centers (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.service_management_center
    ADD CONSTRAINT service_management_center_service_id_foreign FOREIGN KEY (service_id)
    REFERENCES public.services (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.service_price_variations
    ADD CONSTRAINT service_price_variations_service_id_foreign FOREIGN KEY (service_id)
    REFERENCES public.services (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.service_steps
    ADD CONSTRAINT service_steps_service_id_foreign FOREIGN KEY (service_id)
    REFERENCES public.services (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.service_steps
    ADD CONSTRAINT service_steps_step_id_foreign FOREIGN KEY (step_id)
    REFERENCES public.steps (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.service_vehicle_categories
    ADD CONSTRAINT service_vehicle_categories_service_id_foreign FOREIGN KEY (service_id)
    REFERENCES public.services (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.service_vehicle_categories
    ADD CONSTRAINT service_vehicle_categories_vehicle_category_id_foreign FOREIGN KEY (vehicle_category_id)
    REFERENCES public.vehicle_categories (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.services
    ADD CONSTRAINT services_deactived_by_foreign FOREIGN KEY (deactived_by)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.services
    ADD CONSTRAINT services_published_by_foreign FOREIGN KEY (published_by)
    REFERENCES public.users (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.services
    ADD CONSTRAINT services_target_organization_id_foreign FOREIGN KEY (target_organization_id)
    REFERENCES public.organizations (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.services
    ADD CONSTRAINT services_type_id_foreign FOREIGN KEY (type_id)
    REFERENCES public.service_types (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.services
    ADD CONSTRAINT services_vehicle_category_id_foreign FOREIGN KEY (vehicle_category_id)
    REFERENCES public.vehicle_categories (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.space_registration_requests
    ADD CONSTRAINT space_registration_requests_creator_id_foreign FOREIGN KEY (creator_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.space_registration_requests
    ADD CONSTRAINT space_registration_requests_institution_id_foreign FOREIGN KEY (institution_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.space_registration_requests
    ADD CONSTRAINT space_registration_requests_profile_type_id_foreign FOREIGN KEY (profile_type_id)
    REFERENCES public.profile_types (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.space_registration_requests
    ADD CONSTRAINT space_registration_requests_rejector_id_foreign FOREIGN KEY (rejector_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.space_registration_requests
    ADD CONSTRAINT space_registration_requests_validator_id_foreign FOREIGN KEY (validator_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.space_suspension_lifting_requests
    ADD CONSTRAINT space_suspension_lifting_requests_author_id_foreign FOREIGN KEY (author_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.space_suspension_lifting_requests
    ADD CONSTRAINT space_suspension_lifting_requests_rejector_id_foreign FOREIGN KEY (rejector_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.space_suspension_lifting_requests
    ADD CONSTRAINT space_suspension_lifting_requests_space_id_foreign FOREIGN KEY (space_id)
    REFERENCES public.spaces (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.space_suspension_lifting_requests
    ADD CONSTRAINT space_suspension_lifting_requests_validator_id_foreign FOREIGN KEY (validator_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.space_suspension_requests
    ADD CONSTRAINT space_suspension_requests_author_id_foreign FOREIGN KEY (author_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.space_suspension_requests
    ADD CONSTRAINT space_suspension_requests_rejector_id_foreign FOREIGN KEY (rejector_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.space_suspension_requests
    ADD CONSTRAINT space_suspension_requests_space_id_foreign FOREIGN KEY (space_id)
    REFERENCES public.spaces (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.space_suspension_requests
    ADD CONSTRAINT space_suspension_requests_validator_id_foreign FOREIGN KEY (validator_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.spaces
    ADD CONSTRAINT spaces_institution_id_foreign FOREIGN KEY (institution_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.spaces
    ADD CONSTRAINT spaces_profile_type_id_foreign FOREIGN KEY (profile_type_id)
    REFERENCES public.profile_types (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.spaces
    ADD CONSTRAINT spaces_request_id_foreign FOREIGN KEY (request_id)
    REFERENCES public.space_registration_requests (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.staff
    ADD CONSTRAINT staff_center_id_foreign FOREIGN KEY (center_id)
    REFERENCES public.management_centers (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.staff
    ADD CONSTRAINT staff_identity_id_foreign FOREIGN KEY (identity_id)
    REFERENCES public.identities (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.staff
    ADD CONSTRAINT staff_invitation_id_foreign FOREIGN KEY (invitation_id)
    REFERENCES public.invitations (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.staff
    ADD CONSTRAINT staff_position_id_foreign FOREIGN KEY (position_id)
    REFERENCES public.positions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.staff
    ADD CONSTRAINT staff_profile_id_foreign FOREIGN KEY (profile_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.telescope_entries_tags
    ADD CONSTRAINT telescope_entries_tags_entry_uuid_foreign FOREIGN KEY (entry_uuid)
    REFERENCES public.telescope_entries (uuid) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE CASCADE;


ALTER TABLE IF EXISTS public.tinted_window_authorizations
    ADD CONSTRAINT tinted_window_authorizations_demand_id_foreign FOREIGN KEY (demand_id)
    REFERENCES public.demands (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.tinted_window_authorizations
    ADD CONSTRAINT tinted_window_authorizations_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.tinted_window_authorizations
    ADD CONSTRAINT tinted_window_authorizations_vehicle_owner_id_foreign FOREIGN KEY (vehicle_owner_id)
    REFERENCES public.vehicle_owners (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.title_deposits
    ADD CONSTRAINT title_deposits_demand_id_foreign FOREIGN KEY (demand_id)
    REFERENCES public.demands (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.title_deposits
    ADD CONSTRAINT title_deposits_title_reason_id_foreign FOREIGN KEY (title_reason_id)
    REFERENCES public.title_reasons (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.title_deposits
    ADD CONSTRAINT title_deposits_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.title_deposits
    ADD CONSTRAINT title_deposits_vehicle_owner_id_foreign FOREIGN KEY (vehicle_owner_id)
    REFERENCES public.vehicle_owners (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.title_reasons
    ADD CONSTRAINT title_reasons_reason_type_foreign FOREIGN KEY (reason_type)
    REFERENCES public.title_reason_types (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.title_recoveries
    ADD CONSTRAINT title_recoveries_demand_id_foreign FOREIGN KEY (demand_id)
    REFERENCES public.demands (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.title_recoveries
    ADD CONSTRAINT title_recoveries_deposit_id_foreign FOREIGN KEY (deposit_id)
    REFERENCES public.title_deposits (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.title_recoveries
    ADD CONSTRAINT title_recoveries_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.title_recoveries
    ADD CONSTRAINT title_recoveries_vehicle_owner_id_foreign FOREIGN KEY (vehicle_owner_id)
    REFERENCES public.vehicle_owners (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.town_zone
    ADD CONSTRAINT town_zone_town_id_foreign FOREIGN KEY (town_id)
    REFERENCES public.towns (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.town_zone
    ADD CONSTRAINT town_zone_zone_id_foreign FOREIGN KEY (zone_id)
    REFERENCES public.zones (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.towns
    ADD CONSTRAINT towns_state_id_foreign FOREIGN KEY (state_id)
    REFERENCES public.states (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.transactions
    ADD CONSTRAINT transactions_payment_provider_id_foreign FOREIGN KEY (payment_provider_id)
    REFERENCES public.payment_providers (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.transformation_characteristics
    ADD CONSTRAINT transformation_characteristics_new_characteristic_foreign FOREIGN KEY (new_characteristic)
    REFERENCES public.vehicle_characteristics (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.transformation_characteristics
    ADD CONSTRAINT transformation_characteristics_old_characteristic_foreign FOREIGN KEY (old_characteristic)
    REFERENCES public.vehicle_characteristics (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.transformation_characteristics
    ADD CONSTRAINT transformation_characteristics_transformation_id_foreign FOREIGN KEY (transformation_id)
    REFERENCES public.vehicle_transformations (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.transformation_type_vehicle_characteristic_category
    ADD CONSTRAINT transformation_type_vehicle_characteristic_category_category_id FOREIGN KEY (category_id)
    REFERENCES public.vehicle_characteristic_categories (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.transformation_type_vehicle_characteristic_category
    ADD CONSTRAINT transformation_type_vehicle_characteristic_category_type_id_for FOREIGN KEY (type_id)
    REFERENCES public.transformation_types (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.treatment_times
    ADD CONSTRAINT treatment_times_profile_id_foreign FOREIGN KEY (profile_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.treatment_times
    ADD CONSTRAINT treatment_times_treatment_id_foreign FOREIGN KEY (treatment_id)
    REFERENCES public.treatments (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.treatments
    ADD CONSTRAINT treatments_affected_to_interpol_service_by_foreign FOREIGN KEY (affected_to_interpol_service_by)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.treatments
    ADD CONSTRAINT treatments_assigned_to_center_by_foreign FOREIGN KEY (assigned_to_center_by)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.treatments
    ADD CONSTRAINT treatments_assigned_to_interpol_staff_by_foreign FOREIGN KEY (assigned_to_interpol_staff_by)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.treatments
    ADD CONSTRAINT treatments_assigned_to_organization_by_foreign FOREIGN KEY (assigned_to_organization_by)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.treatments
    ADD CONSTRAINT treatments_assigned_to_staff_by_foreign FOREIGN KEY (assigned_to_staff_by)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.treatments
    ADD CONSTRAINT treatments_closed_by_foreign FOREIGN KEY (closed_by)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.treatments
    ADD CONSTRAINT treatments_demand_id_foreign FOREIGN KEY (demand_id)
    REFERENCES public.demands (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.treatments
    ADD CONSTRAINT treatments_interpol_pre_validated_by_foreign FOREIGN KEY (interpol_pre_validated_by)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.treatments
    ADD CONSTRAINT treatments_interpol_service_id_foreign FOREIGN KEY (interpol_service_id)
    REFERENCES public.organizations (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.treatments
    ADD CONSTRAINT treatments_interpol_staff_id_foreign FOREIGN KEY (interpol_staff_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.treatments
    ADD CONSTRAINT treatments_interpol_validated_by_foreign FOREIGN KEY (interpol_validated_by)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.treatments
    ADD CONSTRAINT treatments_management_center_id_foreign FOREIGN KEY (management_center_id)
    REFERENCES public.management_centers (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.treatments
    ADD CONSTRAINT treatments_organization_id_foreign FOREIGN KEY (organization_id)
    REFERENCES public.organizations (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.treatments
    ADD CONSTRAINT treatments_pre_validated_by_foreign FOREIGN KEY (pre_validated_by)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.treatments
    ADD CONSTRAINT treatments_print_order_emitted_by_foreign FOREIGN KEY (print_order_emitted_by)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.treatments
    ADD CONSTRAINT treatments_printed_by_foreign FOREIGN KEY (printed_by)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.treatments
    ADD CONSTRAINT treatments_printer_id_foreign FOREIGN KEY (printer_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.treatments
    ADD CONSTRAINT treatments_rejected_by_foreign FOREIGN KEY (rejected_by)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.treatments
    ADD CONSTRAINT treatments_responsible_id_foreign FOREIGN KEY (responsible_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.treatments
    ADD CONSTRAINT treatments_suspended_by_foreign FOREIGN KEY (suspended_by)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.treatments
    ADD CONSTRAINT treatments_validated_by_foreign FOREIGN KEY (validated_by)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.treatments
    ADD CONSTRAINT treatments_verified_by_foreign FOREIGN KEY (verified_by)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.users
    ADD CONSTRAINT users_identity_id_foreign FOREIGN KEY (identity_id)
    REFERENCES public.identities (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.users
    ADD CONSTRAINT users_online_profile_id_foreign FOREIGN KEY (online_profile_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicle_administrative_statuses
    ADD CONSTRAINT vehicle_administrative_statuses_declarant_id_foreign FOREIGN KEY (declarant_id)
    REFERENCES public.declarants (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicle_administrative_statuses
    ADD CONSTRAINT vehicle_administrative_statuses_demand_id_foreign FOREIGN KEY (demand_id)
    REFERENCES public.demands (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicle_administrative_statuses
    ADD CONSTRAINT vehicle_administrative_statuses_institution_id_foreign FOREIGN KEY (institution_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicle_administrative_statuses
    ADD CONSTRAINT vehicle_administrative_statuses_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicle_administrative_statuses
    ADD CONSTRAINT vehicle_administrative_statuses_vehicle_owner_id_foreign FOREIGN KEY (vehicle_owner_id)
    REFERENCES public.vehicle_owners (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicle_alerts
    ADD CONSTRAINT vehicle_alerts_border_id_foreign FOREIGN KEY (border_id)
    REFERENCES public.borders (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicle_alerts
    ADD CONSTRAINT vehicle_alerts_canceler_officer_id_foreign FOREIGN KEY (cancelor_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicle_alerts
    ADD CONSTRAINT vehicle_alerts_recorder_officer_id_foreign FOREIGN KEY (author_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicle_alerts
    ADD CONSTRAINT vehicle_alerts_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicle_characteristics
    ADD CONSTRAINT vehicle_characteristics_category_id_foreign FOREIGN KEY (category_id)
    REFERENCES public.vehicle_characteristic_categories (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicle_has_characteristics
    ADD CONSTRAINT vehicle_has_characteristics_vehicle_characteristic_id_foreign FOREIGN KEY (vehicle_characteristic_id)
    REFERENCES public.vehicle_characteristics (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicle_has_characteristics
    ADD CONSTRAINT vehicle_has_characteristics_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicle_owners
    ADD CONSTRAINT vehicle_owners_identity_id_foreign FOREIGN KEY (identity_id)
    REFERENCES public.identities (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicle_owners
    ADD CONSTRAINT vehicle_owners_institution_id_foreign FOREIGN KEY (institution_id)
    REFERENCES public.institutions (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicle_owners
    ADD CONSTRAINT vehicle_owners_profile_id_foreign FOREIGN KEY (profile_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicle_passages
    ADD CONSTRAINT vehicle_passages_border_id_foreign FOREIGN KEY (border_id)
    REFERENCES public.borders (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicle_passages
    ADD CONSTRAINT vehicle_passages_immatriculation_country_id_foreign FOREIGN KEY (immatriculation_country_id)
    REFERENCES public.countries (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicle_passages
    ADD CONSTRAINT vehicle_passages_officer_id_foreign FOREIGN KEY (officer_id)
    REFERENCES public.profiles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicle_passages
    ADD CONSTRAINT vehicle_passages_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicle_transformations
    ADD CONSTRAINT vehicle_transformations_demand_id_foreign FOREIGN KEY (demand_id)
    REFERENCES public.demands (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicle_transformations
    ADD CONSTRAINT vehicle_transformations_owner_id_foreign FOREIGN KEY (owner_id)
    REFERENCES public.vehicle_owners (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicle_transformations
    ADD CONSTRAINT vehicle_transformations_vehicle_id_foreign FOREIGN KEY (vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicles
    ADD CONSTRAINT vehicles_back_plate_id_foreign FOREIGN KEY (back_plate_id)
    REFERENCES public.plates (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicles
    ADD CONSTRAINT vehicles_front_plate_id_foreign FOREIGN KEY (front_plate_id)
    REFERENCES public.plates (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicles
    ADD CONSTRAINT vehicles_owner_id_foreign FOREIGN KEY (owner_id)
    REFERENCES public.vehicle_owners (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicles
    ADD CONSTRAINT vehicles_park_id_foreign FOREIGN KEY (park_id)
    REFERENCES public.parks (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.vehicles
    ADD CONSTRAINT vehicles_transformed_vehicle_id_foreign FOREIGN KEY (transformed_vehicle_id)
    REFERENCES public.vehicles (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.villages
    ADD CONSTRAINT villages_district_id_foreign FOREIGN KEY (district_id)
    REFERENCES public.districts (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;

END;